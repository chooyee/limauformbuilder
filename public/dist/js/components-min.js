class Base{constructor(){this.builderEditComponents={},this.elementId=this.getShortUUID()}Test(){const e={};e.group=this.group,e.name=this.name,e.version=this.version,e.config=this.config,console.log(JSON.stringify(e))}createElement(e,t={}){const i=document.createElement(e);return this.appendAttr(i,t),i}appendAttr(e,t={}){for(const[i,o]of Object.entries(t))e.setAttribute(i,o);return e}appendChildren(e,t=[]){for(const i of t)e.appendChild(i);return e}getUUID(){return Date.now().toString(36)+Math.random().toString(36).substr(2)}getShortUUID(e=8){let t="";const i="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";t=i[Math.floor(52*Math.random())];for(let i=0;i<e;i++)t+=o[Math.floor(62*Math.random())];return t}showTooltip(e){const t=e.getAttribute("data-tooltip"),i=document.createElement("div");i.classList.add("tooltip"),i.textContent=t;const o=e.getBoundingClientRect();i.style.top=o.top+window.scrollY-i.offsetHeight+"px",i.style.left=`${o.left+window.scrollX+(e.offsetWidth-i.offsetWidth)/2}px`,i.style.position="absolute",i.style.margin="0 1rem 1rem 1rem",document.body.appendChild(i),setTimeout((()=>{i.remove()}),2e3)}isPropExists(e,t){return e.hasOwnProperty(t)&&null!==e[t]&&void 0!==e[t]}isNullOrEmpty(e){return null==e||"string"==typeof e&&""===e.trim()||Array.isArray(e)&&0===e.length}renderBuilderEditComponent(){const e=this.createElement("div",{class:"component-btn-group"}),t=this.createElement("div",{ref:"removeComponent",class:"btn btn-xxs btn-danger component-settings-button component-settings-button-remove",tabindex:"-1","aria-label":"Remove button. Click to remove component from the form",role:"button"});t.appendChild(this.createElement("i",{class:"fa fa-remove bi bi-trash"}));const i=this.createElement("div",{ref:"editComponent",class:"btn btn-xxs btn-success component-settings-button component-settings-button-edit",tabindex:"-1","aria-label":"Edit button. Click to open component from the form",role:"button"});return i.appendChild(this.createElement("i",{class:"fa fa-cog bi bi-sliders"})),e.appendChild(t),e.appendChild(i),this.builderEditComponents.edit=i,this.builderEditComponents.remove=t,e}getBuilderEditComponent(e){return this.builderEditComponents[e]}trueTypeOf(e){return Object.prototype.toString.call(e).slice(8,-1).toLowerCase()}renderDomElement(){let e=this.config;const t=this.elementId;let i=this.createElement("div",{id:t,tabindex:"-1",ref:"dragComponent",class:"builder-component"});if(e.formBuilderMode){const e=this.createElement("div",{class:"drag-helper"});e.appendChild(this.createElement("i",{class:"fa fa-arrows-move bi bi-arrows-move"})),i.appendChild(e),i.appendChild(this.renderBuilderEditComponent())}let o=this.createElement("div",{id:"component-"+t,ref:"component",class:"mb-2","data-component-type":this.config.type});i.appendChild(o);const a=this.renderElement(e,t);if(this.isNullOrEmpty(e.label)||"none"===e.labelPosition.toLowerCase())o.appendChild(a);else{const i=this.renderLabel(t,e.label);if(this.isPropExists(e,"tooltip")&&i.appendChild(this.renderTooltip(e.tooltip)),"top"==e.labelPosition.toLowerCase())o.appendChild(i),o.appendChild(a);else if("left-left"==e.labelPosition.toLowerCase()){const t=this.renderFieldDiv(e.labelWidth,e.labelMargin);t.appendChild(i);const n=this.renderFieldDiv(100-(e.labelWidth+e.labelMargin));n.appendChild(a);const l=this.createElement("div",{style:"display:flex"});l.appendChild(t),l.appendChild(n),o.appendChild(l)}}return"none"===e.display&&(i.style.display="none"),i}renderLabel(e,t){const i=this.createElement("label"),o=`label-${e}`,a=`${this.name}-${e}`;return this.appendAttr(i,{id:o,for:a,class:"col-form-label",ref:"label"}),i.innerHTML=t,i}renderTooltip=e=>{const t=this.createElement("i");return this.appendAttr(t,{"data-tooltip":e,"aria-expanded":"false",tabindex:"0",class:"fa fa-question-sign bi bi-question-circle text-muted",ref:"tooltip"}),t.addEventListener("mouseover",(e=>{this.showTooltip(t)})),t.addEventListener("mouseleave",(()=>{this.removeTooltip(t)})),t};renderFieldDiv=(e,t)=>{let i=`flex: ${e};`;return t>0&&(i+=`margin-right: ${t}%`),this.createElement("div",{style:i,class:"field-label"})};createInstance(classNameString,json){var obj=new(eval(classNameString))(json);return obj}renderEditForm=()=>{const e=this.getEditFormJson(),t=this.createElement("ul",{class:"nav nav-pills mb-3",id:"pills-tab",role:"tablist"}),i=this.createElement("div",{class:"tab-content",id:"pills-tabContent"});let o=0;e.tabs.forEach((e=>{let a=0==o;t.innerHTML+=this.renderTabHeader(e.tabId,e.tabLabel,a);const n=this.renderTabContentContainer(e.tabId,a);e.components.forEach((e=>{const t=this.createInstance(e.type,JSON.stringify(e));n.appendChild(t.renderDomElement())})),i.appendChild(n),o++}));const a=this.createElement("div",{ref:"tabContainer"});return a.appendChild(t),a.appendChild(i),a};attachComponentEventListener=e=>{};executeButtonSave(){}attachEditFormEvent(){const formData=this.getEditFormJson();formData.tabs.forEach((tab=>{tab.components.forEach((component=>{if(component.hasOwnProperty("events")){const events=component.events;events.forEach((ev=>{eval(`${component.type}.${ev.handler}('${ev.event}', '${ev.target}', '${component.propertyId}')`)}))}}))}))}renderTabHeader(e,t,i){let o="";return i&&(o="active"),`<li class="nav-item" role="presentation">\n                    <button class="nav-link ${o}" id="pills-${e}-tab" data-bs-toggle="pill" data-bs-target="#pills-${e}" type="button" role="tab" aria-controls="pills-${e}" aria-selected="${i}">${t}</button>\n                </li>`}renderTabContentContainer=(e,t)=>{let i="";return t&&(i="show active"),this.createElement("div",{class:"tab-pane fade "+i,id:`pills-${e}`,role:"tabpanel","aria-labelledby":`pills-${e}-tab`})};static removeListeners=(e,t)=>{const i=e.cloneNode(!0).listeners;i&&(i[t]=[])};static trueTypeOf=e=>Object.prototype.toString.call(e).slice(8,-1).toLowerCase()}class Button extends Base{constructor(e){super(),this.group="Basic",this.name="Button",this.version="v1",this.config=void 0!==e?JSON.parse(e):{};let t=this.config;void 0===t.propertyName&&(t.propertyName=""),void 0===t.type&&(t.type="Button"),void 0===t.buttonLabel&&(t.buttonLabel="My Button"),void 0===t.buttonPostUrl&&(t.buttonPostUrl=""),void 0===t.buttonActionType&&(t.buttonActionType="Submit"),void 0===t.validation&&(t.validation={},t.validation.mandatory=!1,void 0===t.validation.lengthCheck&&(t.validation.lengthCheck={},t.validation.lengthCheck.min=0,t.validation.lengthCheck.max=0)),void 0===t.formBuilderMode&&(t.formBuilderMode=!1)}getEditFormJson=()=>({label:"Text Field Component Edit Form",tabs:[{tabLabel:"Display",tabId:"home",components:[{propertyName:"buttonLabel",label:"Button Label",placeholder:"My Button label",description:"Enter the label for this Button",validation:{mandatory:!0,lengthCheck:{min:0,max:0}},value:this.config.buttonLabel,type:"Textbox"},{propertyName:"buttonClass",label:"Button Color Type",value:this.config.buttonClass,description:"Select the type for the button",options:[{primary:"primary"},{secondary:"secondary"},{success:"success"},{danger:"danger"},{warning:"warning"},{info:"info"},{light:"light"},{dark:"dark"}],type:"Select"},{propertyName:"buttonSize",label:"Button Size",value:this.config.buttonSize,description:"Select the size for the button",options:[{md:"Medium"},{lg:"Large"},{sm:"Small"}],type:"Select"},{propertyName:"position",label:"Header Position",value:this.config.position,description:"Select the position for the header",options:[{left:"left"},{center:"center"},{right:"right"}],type:"Select"},{propertyName:"customCss",label:"Custom CSS",placeholder:"custom css",description:"Set the custom css, for ex: form-control form-item",type:"Textbox",value:this.config.customCss}]},{tabLabel:"Behavior",tabId:"behavior",components:[{propertyId:"editFormButtonActionType",propertyName:"buttonActionType",label:"Button Action",options:[{Submit:"Submit"},{Reset:"Reset"},{Post:"Post"},{Navigate:"Navigate"}],value:this.config.buttonActionType,type:"Select"},{propertyId:"editFormButtonActionPostUrlTextbox",propertyName:"buttonPostUrl",label:"Post Url",value:this.config.buttonPostUrl,type:"Textbox",display:"none",prefix:"https://",description:"ex: <pre>api.alliancelugin.io/dynamicform/xsddsse</pre>",events:[{type:"editFormDisplay",target:"editFormButtonActionType",event:"change",handler:"editFormButtonActionTypeChangeListener"}]}]},{tabLabel:"Data",tabId:"data",components:[{propertyName:"propertyName",label:"Data Property",value:this.config.propertyName,type:"Textbox"}]}]});renderElement=(e,t)=>{const i=this.createElement("div",{class:"d-flex"});"center"===e.position?i.classList.add("justify-content-center","align-items-center"):"right"===e.position&&i.classList.add("justify-content-end","align-items-right");const o=this.renderRawElement(e,t);i.appendChild(o);const a=this.createElement("div",{ref:"element"});return a.appendChild(i),a};renderRawElement=(e,t)=>{const i=e.propertyName,o=this.createElement("button",{id:`${this.name}-${t}`,class:"btn",type:"text",ref:"button"});return o.classList.add(`btn-${e.buttonClass}`),o.classList.add(`btn-${e.buttonSize}`),o.innerHTML=e.buttonLabel,this.isNullOrEmpty(e.propertyId)||o.setAttribute("data-id",e.propertyId),this.isNullOrEmpty(i)||o.setAttribute("data-property",i),o}}class CardImage extends Base{constructor(e){super(),this.group="Basic",this.name="CardImage",this.version="v1",this.config=void 0!==e?JSON.parse(e):{};let t=this.config;void 0===t.propertyName&&(t.propertyName=""),void 0===t.type&&(t.type="CardImage"),void 0===t.position&&(t.position="left"),void 0===t.image&&(t.image=""),void 0===t.letterCase&&(t.letterCase="none"),void 0===t.bodyText&&(t.bodyText=""),void 0===t.headerText&&(t.headerText=""),void 0===t.imageWidth&&(t.imageWidth=""),void 0===t.formBuilderMode&&(t.formBuilderMode=!1)}getEditFormJson=()=>({label:"Card Image Component Edit Form",tabs:[{tabLabel:"Display",tabId:"home",components:[{propertyId:"cardImageUpload",propertyName:"image",label:"Image",description:"Select Image",image:this.config.image,type:"ImageUpload"},{propertyName:"bodyText",label:"Image Body Text (optional)",placeholder:"Image body text",description:"Enter the text for this image card (optional)",value:this.config.bodyText,type:"Textarea"},{propertyName:"position",label:"Header Position",value:this.config.position,description:"Select the position for the header",options:[{left:"left"},{center:"center"},{right:"right"}],type:"Select"},{propertyName:"imageWidth",label:"Image Width",type:"Numberbox",suffix:"rem",value:this.config.imageWidth}]},{tabLabel:"Data",tabId:"data",components:[{propertyName:"propertyName",label:"Data Property",value:this.config.propertyName,type:"Textbox"}]}]});renderElement=(e,t)=>{const i=this.createElement("div",{class:"card d-flex"});"center"===e.position?i.classList.add("justify-content-center","align-items-center"):"right"===e.position&&i.classList.add("justify-content-end","align-items-right");const o=this.renderRawElement(e,t);if(i.appendChild(o),!this.isNullOrEmpty(e.bodyText)){const t=this.createElement("div",{class:"card-body"}),o=this.createElement("p",{class:"card-text d-flex"});switch("center"===e.position?o.classList.add("justify-content-center","align-items-center"):"right"===e.position&&o.classList.add("justify-content-end","align-items-right"),e.letterCase){case"upper":o.classList.add("text-uppercase");break;case"lower":o.classList.add("text-lowercase");break;case"capital":o.classList.add("text-capitalize")}o.innerHTML=e.bodyText,t.appendChild(o),i.appendChild(t)}return i};renderRawElement=(e,t)=>{const i=e.propertyName,o=this.createElement("img",{id:`${this.name}-${t}`,class:"card-image-top img-fluid",src:e.image,ref:"input"});return this.isNullOrEmpty(e.imageWidth)||(o.style.width=e.imageWidth+"rem"),this.isNullOrEmpty(e.propertyId)||o.setAttribute("data-id",e.propertyId),this.isNullOrEmpty(i)||o.setAttribute("data-property",i),o};executeButtonSave=async()=>{const e=document.querySelector('[data-id="cardImageUpload"]'),t=document.getElementById(`${e.id}-preview`),i=t.querySelector("a");if(i){const e=i.getAttribute("href");this.config.blobImageUrl=e;const t=await this.uploadImageToApi(e,"/api/v1/upload");return this.config.image=location.protocol+"//"+location.host+"/"+t,console.log(t),t}{const e=t.querySelector("img");return this.config.image=e.src,this.config.image}};uploadImageToApi(e,t){return fetch(e).then((e=>e.blob())).then((e=>{const i=new FormData;return i.append("image",e,e.name),fetch(t,{method:"POST",body:i}).then((e=>{if(!e.ok)throw new Error(`HTTP error! Status: ${e.status}`);return e.json()})).then((e=>e.img)).catch((e=>{console.error("Error uploading image:",e)}))}))}}class Checkbox extends Base{constructor(e){super(),this.group="Basic",this.name="Checkbox",this.version="v1",this.config=void 0!==e?JSON.parse(e):{};let t=this.config;void 0===t.propertyName&&(t.propertyName="Checkbox"),void 0===t.type&&(t.type="Checkbox"),void 0===t.label&&(t.label="My Checkbox"),void 0===t.labelPosition&&(t.labelPosition="Left-Left"),void 0===t.labelWidth&&(t.labelWidth=30),void 0===t.labelMargin&&(t.labelMargin=3),void 0===t.value&&(t.value=""),void 0===t.formBuilderMode&&(t.formBuilderMode=!1)}getEditFormJson=()=>({label:"Checkbox Component Edit Form",tabs:[{tabLabel:"Display",tabId:"home",components:[{propertyName:"label",label:"Label",labelPosition:"Left-Left",description:"Enter the label the checkbox",validate:{mandatory:!0,lengthCheck:{min:0,max:0}},value:this.config.label,type:"Textbox"}]},{tabLabel:"Data",tabId:"Data",components:[{propertyName:"value",label:"Checked by default",type:"Checkbox",value:this.config.value}]}]});renderDomElement=()=>{let e=this.config;const t=this.elementId;let i=this.createElement("div",{id:t,tabindex:"-1",ref:"dragComponent",class:"builder-component"});e.formBuilderMode&&i.appendChild(this.renderBuilderEditComponent());let o=this.createElement("div",{id:"component-"+t,ref:"component",class:"mb-2"});i.appendChild(o);const a=this.renderElement(e,t);return this.isPropExists(e,"tooltip")&&label.appendChild(this.renderTooltip(e.tooltip)),o.appendChild(a),i};renderElement=(e,t)=>{const i=e.description,o=this.createElement("div",{class:"form-check"}),a=this.renderRawElement(e,t);o.appendChild(a);const n=this.createElement("label",{class:"form-check-label",for:`${this.name}-${t}`}),l=this.createElement("span");l.innerHTML=e.label,n.appendChild(l),o.appendChild(n);const r=this.createElement("div",{ref:"element"});if(r.appendChild(o),!this.isNullOrEmpty(i)){const e=this.createElement("div",{class:"form-text text-muted"});e.innerHTML=i,r.appendChild(e)}return r};renderRawElement=(e,t)=>{const i=e.propertyName,o=e.value,a=this.createElement("input",{"data-property":i,id:`${this.name}-${t}`,class:"form-check-input",type:"checkbox",ref:"input"});return this.isNullOrEmpty(e.propertyId)||a.setAttribute("data-id",e.propertyId),this.isNullOrEmpty(o)||this.setCheckboxState(a,o),a};setCheckboxState(e,t){e&&(e.checked=t)}}class Column extends Base{constructor(e){super(),this.group="Basic",this.version="v1",this.name="Column",this.config=void 0!==e?JSON.parse(e):{};let t=this.config;void 0===t.columns&&(t.columns=[]),void 0===t.propertyName&&(t.propertyName="Column"),void 0===t.type&&(t.type="Column"),void 0===t.numOfColumns&&(t.numOfColumns=3),void 0===t.formBuilderMode&&(t.formBuilderMode=!1)}getEditFormJson=()=>({label:"Column Component Edit Form",tabs:[{tabLabel:"Display",tabId:"home",components:[{propertyName:"position",label:"Position",description:"Set the position of the label",options:[{left:"left"},{center:"center"},{right:"right"}],value:this.config.position,type:"Select"},{propertyName:"numOfColumns",label:"Number of Columns",description:"Set number of columns",options:["1","2","3","4","5","6","7","8","9","10"],value:this.config.numOfColumns,type:"Select"}]},{tabLabel:"Data",tabId:"data",components:[{propertyName:"propertyName",label:"Data Property",value:this.config.propertyName,type:"Textbox"}]}]});renderElement=(e,t)=>{const i=this.createElement("div",{class:"d-flex"});"center"===e.position?i.classList.add("justify-content-center","align-items-center"):"right"===e.position&&i.classList.add("justify-content-end","align-items-right");const o=this.renderRawElement(e,t);i.appendChild(o);const a=this.createElement("div",{ref:"element"});return a.appendChild(i),a};renderRawElement=(e,t)=>{const i=e.propertyName,o=`${this.name}-${t}`,a=this.createElement("div",{"data-property":i,id:o,class:"container",ref:"input"});this.isNullOrEmpty(e.propertyId)||a.setAttribute("data-id",e.propertyId);const n=this.createElement("div",{id:`row-${t}-0`,"data-parent":o,class:"row",ref:"row"});e.columns=[];for(let i=0;i<e.numOfColumns;i++){const a=`col-${t}-${i}`,l=this.createElement("div",{class:"col form-column","data-parent":o,ref:"col"}),r=this.createElement("div",{id:a,"data-parent":o,class:"col-drop-container builder-components",ref:"container","data-col":i});if(e.formBuilderMode){const e=this.createElement("div",{"data-position":"0","data-noattach":"true",role:"alert",style:"text-align:center;",class:"builder-component drag-and-drop-alert alert alert-info no-drop"});e.innerHTML="Drag and Drop a form component",r.appendChild(e)}l.appendChild(r),n.appendChild(l),e.columns.push({"element-type":"container",components:[]})}return a.appendChild(n),this.dropZonEventHandler(a),a};dropZonEventHandler(e){e.querySelectorAll(".col-drop-container").forEach((e=>{e.addEventListener("dragover",(t=>{dropZoneDragoverEventHandler(e,t)})),e.addEventListener("dragenter",(e=>{})),e.addEventListener("dragleave",(t=>{dropZoneDragleaveEventHandler(e,t)})),e.addEventListener("drop",(t=>{console.log("drop"),elementDropped(e,t)}))}))}}class DateTimeInput extends Base{constructor(e){super(),this.group="Basic",this.name="DateTimeInput",this.version="v1",this.config=void 0!==e?JSON.parse(e):{};let t=this.config;void 0===t.propertyName&&(t.propertyName=""),void 0===t.type&&(t.type="DateTimeInput"),void 0===t.label&&(t.label="My DateTimeInput"),void 0===t.labelPosition&&(t.labelPosition="Left-Left"),void 0===t.labelWidth&&(t.labelWidth=30),void 0===t.labelMargin&&(t.labelMargin=3),void 0===t.value&&(t.value=""),void 0===t.case&&(t.case="none"),void 0===t.validation&&(t.validation={},t.validation.mandatory=!1,void 0===t.validation.lengthCheck&&(t.validation.lengthCheck={},t.validation.lengthCheck.min=0,t.validation.lengthCheck.max=0)),void 0===t.visibility&&(t.visibility={},void 0===t.visibility.simple&&(t.visibility.simple={},t.visibility.simple.target="",t.visibility.simple.value="")),void 0===t.formBuilderMode&&(t.formBuilderMode=!1)}getEditFormJson=()=>({label:"Date Time Input Field Component Edit Form",tabs:[{tabLabel:"Display",tabId:"home",components:[{propertyName:"label",label:"Label",placeholder:"My Date/Time text",description:"Enter the label for this date/time field",validation:{mandatory:!0,lengthCheck:{min:0,max:0}},value:this.config.label,type:"Textbox"},{propertyName:"labelPosition",label:"Label Position",placeholder:"Label Position",description:"Set the position of the label",options:[{Top:"Top"},{"Left-Left":"Left"}],value:this.config.labelPosition,type:"Select"},{propertyName:"description",label:"Descriptions (Optional)",description:"Description for the textbox",type:"Textbox",value:this.config.description},{propertyName:"placeholder",label:"Placeholder (Optional)",placeholder:"Placeholder on the textbox",type:"Textbox",value:this.config.placeholder},{propertyName:"prefix",label:"Prefix (Optional)",placeholder:"Prefix",description:"Set the prefix infront of the text field, for ex: {RM} [textbox]",type:"Textbox",value:this.config.prefix},{propertyName:"suffix",label:"Suffix (Optional)",placeholder:"Suffix",description:"Set the prefix infront of the text field, for ex: [textbox] {RM}",type:"Textbox",value:this.config.suffix},{propertyName:"customCss",label:"Custom CSS",placeholder:"custom css",description:"Set the custom css, for ex: form-control form-item",type:"Textbox",value:this.config.customCss}]},{tabLabel:"Validation",tabId:"validate",components:[{propertyGroup:"validation",propertyType:"mandatory",propertyName:"validation-mandatory",label:"This is mandatory field?",value:this.config.validation.mandatory,type:"Checkbox"}]},{tabLabel:"Data",tabId:"data",components:[{propertyName:"propertyName",label:"Data Property",value:this.config.propertyName,type:"Textbox"},{propertyName:"value",label:"Default Value",value:this.config.value,type:"Textbox"}]}]});renderElement=(e,t)=>{const i=e.prefix,o=e.suffix,a=e.description,n=this.createElement("div",{class:"input-group"});if(!this.isNullOrEmpty(i)){const e=this.createElement("div",{ref:"prefix",class:"input-group-text"});e.innerHTML=i,n.appendChild(e)}const l=this.renderRawElement(e,t);if(n.appendChild(l),!this.isNullOrEmpty(o)){const e=this.createElement("div",{ref:"suffix",class:"input-group-text"});e.innerHTML=o,n.appendChild(e)}const r=this.createElement("div",{ref:"element"});if(r.appendChild(n),!this.isNullOrEmpty(a)){const e=this.createElement("div",{class:"form-text text-muted"});e.innerHTML=a,r.appendChild(e)}return r};renderRawElement=(e,t)=>{const i=e.propertyName,o=e.placeholder,a=e.case,n=e.value,l=this.createElement("input",{id:`${this.name}-${t}`,class:"form-control",type:"date",ref:"input"});switch(this.isNullOrEmpty(e.propertyId)||l.setAttribute("data-id",e.propertyId),this.isNullOrEmpty(i)||l.setAttribute("data-property",i),this.isNullOrEmpty(n)||l.setAttribute("value",n),a){case"upper":l.classList.add("text-uppercase");break;case"lower":l.classList.add("text-lowercase");break;case"capital":l.classList.add("text-capitalize")}return this.isNullOrEmpty(o)||l.setAttribute("placeholder",o),this.isPropExists(e,"validation")&&this.isPropExists(e.validation,"mandatory")&&l.classList.add("mandatory"),l};static editFormButtonActionTypeChangeListener=(e,t,i)=>{const o=document.querySelector(`[data-id="${t}"]`),a=document.querySelector(`[data-id="${i}"]`);o.addEventListener(e,(function(e){Textbox.editFormButtonActionTypeChangeHandler(o,a)})),o.dispatchEvent(new Event("change"))};static editFormButtonActionTypeChangeHandler=(e,t)=>{const i=t.closest("div.builder-component");"Post"===e.value?i.style.display="block":i.style.display="none"}}class Header extends Base{constructor(e){super(),this.group="Basic",this.name="Header",this.version="v1",this.config=void 0!==e?JSON.parse(e):{};let t=this.config;void 0===t.propertyName&&(t.propertyName=""),void 0===t.type&&(t.type="Header"),void 0===t.label&&(t.label=""),void 0===t.labelWidth&&(t.labelWidth=30),void 0===t.labelMargin&&(t.labelMargin=3),void 0===t.value&&(t.value=""),void 0===t.leftterCase&&(t.leftterCase="none"),void 0===t.visibility&&(t.visibility={},void 0===t.visibility.simple&&(t.visibility.simple={},t.visibility.simple.target="",t.visibility.simple.value="")),void 0===t.formBuilderMode&&(t.formBuilderMode=!1)}getEditFormJson=()=>({label:"Text Field Component Edit Form",tabs:[{tabLabel:"Display",tabId:"home",components:[{propertyName:"headerType",label:"Header Type",value:this.config.headerType,description:"Select the header type",options:[{h1:"H1"},{h2:"H2"},{h3:"H3"},{h4:"H4"},{h5:"H5"}],type:"Select"},{propertyName:"position",label:"Header Position",value:this.config.position,description:"Select the position for the header",options:[{left:"left"},{center:"center"},{right:"right"}],type:"Select"},{propertyName:"value",label:"My Header",description:"Enter the header",value:this.config.value,type:"Textbox"},{propertyName:"letterCase",label:"Lettercase",description:"Select the letter case for the header",value:this.config.letterCase,options:[{none:"None"},{upper:"Uppercase"},{lower:"Lowercase"},{capital:"Capital"}],type:"Select"},{propertyName:"description",label:"Descriptions (Optional)",description:"Description for the textbox",type:"Textbox",value:this.config.description},{propertyName:"customCss",label:"Custom CSS",placeholder:"custom css",description:"Set the custom css, for ex: form-control form-item",type:"Textbox",value:this.config.customCss}]},{tabLabel:"Data",tabId:"data",components:[{propertyName:"propertyName",label:"Data Property",value:this.config.propertyName,type:"Textbox"}]}]});renderElement=(e,t)=>{const i=e.description,o=this.createElement("div",{class:"d-flex"});"center"===e.position?o.classList.add("justify-content-center","align-items-center"):"right"===e.position&&o.classList.add("justify-content-end","align-items-right");const a=this.renderRawElement(e,t);o.appendChild(a);const n=this.createElement("div",{ref:"element"});if(n.appendChild(o),!this.isNullOrEmpty(i)){const t=this.createElement("div",{class:"d-flex form-text text-muted"});"center"===e.position?t.classList.add("justify-content-center","align-items-center"):"right"===e.position&&t.classList.add("justify-content-end","align-items-right"),t.innerHTML=i,n.appendChild(t)}return n};renderRawElement=(e,t)=>{const i=e.propertyName,o=e.letterCase,a=e.value,n=this.createElement(this.config.headerType,{id:`${this.name}-${t}`,class:"mb-3",ref:"input"});switch(this.isNullOrEmpty(e.propertyId)||n.setAttribute("data-id",e.propertyId),this.isNullOrEmpty(i)||n.setAttribute("data-property",i),this.isNullOrEmpty(a)||(n.innerHTML=a),o){case"upper":n.classList.add("text-uppercase");break;case"lower":n.classList.add("text-lowercase");break;case"capital":n.classList.add("text-capitalize")}return n}}function ImageProcessor(e,t){this.refs={},this.refs.imagePreviews=e,this.refs.fileSelector=t}ImageProcessor.prototype.addImageBox=function(e){e.innerHTML="";let t=document.createElement("div"),i=document.createElement("progress");return t.appendChild(i),e.appendChild(t),t},ImageProcessor.prototype.processFile=function(e){if(!e)return;let t=this.addImageBox(this.refs.imagePreviews);new Promise((function(t,i){let o=new Image;o.addEventListener("load",(function(){t(o)})),o.src=URL.createObjectURL(e)})).then((function(e){return new Promise((function(t,i){let o=document.createElement("canvas"),a=o.getContext("2d");o.width=e.width,o.height=e.height,a.drawImage(e,0,0),o.toBlob((function(e){t(URL.createObjectURL(e))}),"image/webp")}))})).then((function(e){return new Promise((function(t,i){let o=new Image;o.addEventListener("load",(function(){t({imageURL:e,scaledImg:o})})),o.setAttribute("src",e),o.classList.add("img-thumbnail")}))})).then((function(i){let o=document.createElement("a");o.setAttribute("href",i.imageURL),o.setAttribute("download",`${e.name}.webp`),o.appendChild(i.scaledImg),t.innerHTML="",t.appendChild(o)}))},ImageProcessor.prototype.processFiles=function(e){for(let t of e)this.processFile(t)},ImageProcessor.prototype.fileSelectorChanged=function(){this.processFiles(this.refs.fileSelector.files),this.refs.fileSelector.value=""},ImageProcessor.prototype.setDragDrop=function(e){e.addEventListener("dragenter",this.dragenter,!1),e.addEventListener("dragover",this.dragover,!1),e.addEventListener("drop",(e=>this.drop(e)),!1)},ImageProcessor.prototype.dragenter=function(e){e.stopPropagation(),e.preventDefault()},ImageProcessor.prototype.dragover=function(e){e.stopPropagation(),e.preventDefault()},ImageProcessor.prototype.drop=function(e){e.stopPropagation(),e.preventDefault(),this.processFiles(e.dataTransfer.files)};class ImageUpload extends Base{constructor(e){super(),this.group="Basic",this.name="ImageUpload",this.version="v1",this.config=void 0!==e?JSON.parse(e):{};let t=this.config;void 0===t.propertyName&&(t.propertyName=""),void 0===t.type&&(t.type="ImageUpload"),void 0===t.label&&(t.label="My Image Upload"),void 0===t.labelPosition&&(t.labelPosition="Left-Left"),void 0===t.labelWidth&&(t.labelWidth=30),void 0===t.labelMargin&&(t.labelMargin=3),void 0===t.value&&(t.value=""),void 0===t.case&&(t.case="none"),void 0===t.validation&&(t.validation={},t.validation.mandatory=!1,void 0===t.validation.lengthCheck&&(t.validation.lengthCheck={},t.validation.lengthCheck.min=0,t.validation.lengthCheck.max=0)),void 0===t.visibility&&(t.visibility={},void 0===t.visibility.simple&&(t.visibility.simple={},t.visibility.simple.target="",t.visibility.simple.value="")),void 0===t.formBuilderMode&&(t.formBuilderMode=!1)}getEditFormJson=()=>({label:"Text Field Component Edit Form",tabs:[{tabLabel:"Display",tabId:"home",components:[{propertyName:"label",label:"Label",placeholder:"My Textbox label",description:"Enter the label for this text field",validation:{mandatory:!0,lengthCheck:{min:0,max:0}},value:this.config.label,type:"Textbox"},{propertyName:"labelPosition",label:"Label Position",placeholder:"Label Position",description:"Set the position of the label",options:[{Top:"Top"},{"Left-Left":"Left"}],value:this.config.labelPosition,type:"Select"},{propertyName:"description",label:"Descriptions (Optional)",description:"Description for the textbox",type:"Textbox",value:this.config.description},{propertyName:"placeholder",label:"Placeholder (Optional)",placeholder:"Placeholder on the textbox",type:"Textbox",value:this.config.placeholder},{propertyName:"customCss",label:"Custom CSS",placeholder:"custom css",description:"Set the custom css, for ex: form-control form-item",type:"Textbox",value:this.config.customCss}]},{tabLabel:"Validation",tabId:"validate",components:[{propertyGroup:"validation",propertyType:"mandatory",propertyName:"validation-mandatory",label:"This is mandatory field?",value:this.config.validation.mandatory,type:"Checkbox"}]},{tabLabel:"Data",tabId:"data",components:[{propertyName:"propertyName",label:"Data Property",value:this.config.propertyName,type:"Textbox"}]}]});renderElement=(e,t)=>{const i=e.prefix,o=e.suffix,a=e.description,n=this.createElement("div",{class:"input-group"});if(!this.isNullOrEmpty(i)){const e=this.createElement("div",{ref:"prefix",class:"input-group-text"});e.innerHTML=i,n.appendChild(e)}const l=this.renderRawElement(e,t);if(n.appendChild(l),!this.isNullOrEmpty(o)){const e=this.createElement("div",{ref:"suffix",class:"input-group-text"});e.innerHTML=o,n.appendChild(e)}const r=this.createElement("div",{ref:"element"});if(r.appendChild(n),!this.isNullOrEmpty(a)){const e=this.createElement("div",{class:"form-text text-muted"});e.innerHTML=a,r.appendChild(e)}return r};renderRawElement=(e,t)=>{const i=e.propertyName,o=e.value,a=this.createElement("input",{id:`${this.name}-${t}`,class:"form-control",type:"file",accept:"image/*",ref:"input"});this.isNullOrEmpty(e.propertyId)||a.setAttribute("data-id",e.propertyId),this.isNullOrEmpty(i)||a.setAttribute("data-property",i),this.isNullOrEmpty(o)||a.setAttribute("value",o),this.isPropExists(e,"validation")&&this.isPropExists(e.validation,"mandatory")&&a.classList.add("mandatory");const n=this.createElement("div",{id:`${this.name}-${t}-preview`});this.isNullOrEmpty(e.image)||n.appendChild(this.createElement("img",{class:"img-thumbnail",src:e.image,ref:"img"}));const l=this.createElement("div",{class:"layout"});l.appendChild(a),l.appendChild(n);const r=new ImageProcessor(n,a);return r.setDragDrop(n),r.refs.fileSelector.addEventListener("change",(()=>r.fileSelectorChanged())),l}}class Numberbox extends Base{constructor(e){super(),this.group="Basic",this.name="Numberbox",this.version="v1",this.config=void 0!==e?JSON.parse(e):{};let t=this.config;void 0===t.propertyName&&(t.propertyName=""),void 0===t.type&&(t.type="Numberbox"),void 0===t.label&&(t.label="My Number box"),void 0===t.labelPosition&&(t.labelPosition="Left-Left"),void 0===t.labelWidth&&(t.labelWidth=30),void 0===t.labelMargin&&(t.labelMargin=3),void 0===t.value&&(t.value=""),void 0===t.pattern&&(t.pattern="/[^0-9]/g"),void 0===t.validation&&(t.validation={},t.validation.mandatory=!1,void 0===t.validation.lengthCheck&&(t.validation.lengthCheck={},t.validation.lengthCheck.min=0,t.validation.lengthCheck.max=0)),void 0===t.formBuilderMode&&(t.formBuilderMode=!1)}getEditFormJson=()=>({label:"Number Field Component Edit Form",tabs:[{tabLabel:"Display",tabId:"home",components:[{propertyName:"label",label:"Label",placeholder:"My Numberbox label",description:"Enter the label for this number field",validation:{mandatory:!0,lengthCheck:{min:0,max:0}},value:this.config.label,type:"Textbox"},{propertyName:"labelPosition",label:"Label Position",placeholder:"Label Position",description:"Set the position of the label",options:[{Top:"Top"},{"Left-Left":"Left"},{None:"None"}],value:this.config.labelPosition,type:"Select"},{propertyName:"description",label:"Descriptions (Optional)",description:"Description for the number field",type:"Textbox",value:this.config.description},{propertyName:"placeholder",label:"Placeholder (Optional)",placeholder:"Placeholder on the number field",type:"Textbox",value:this.config.placeholder},{propertyName:"prefix",label:"Prefix (Optional)",placeholder:"Prefix",description:"Set the prefix infront of the text field, for ex: {RM} [numberbox]",type:"Textbox",value:this.config.prefix},{propertyName:"suffix",label:"Suffix (Optional)",placeholder:"Suffix",description:"Set the prefix infront of the text field, for ex: [numberbox] {RM}",type:"Textbox",value:this.config.suffix},{propertyName:"customCss",label:"Custom CSS",placeholder:"custom css",description:"Set the custom css, for ex: form-control form-item",type:"Textbox",value:this.config.customCss}]},{tabLabel:"Validation",tabId:"validate",components:[{propertyGroup:"validation",propertyType:"mandatory",propertyName:"validation-mandatory",label:"This is mandatory field?",value:this.config.validation.mandatory,type:"Checkbox"},{propertyGroup:"validation",propertyType:"lengthCheck",propertyName:"validation-lengthCheck-min",label:"Minimum Length (Optional)",placeholder:"Minimum Length",type:"Numberbox",value:this.config.validation.lengthCheck.min},{propertyGroup:"validation",propertyType:"lengthCheck",propertyName:"validation-lengthCheck-max",label:"Maximum Length (Optional)",placeholder:"Maximum Length",type:"Numberbox",value:this.config.validation.lengthCheck.max}]},{tabLabel:"Data",tabId:"data",components:[{propertyName:"propertyName",label:"Data Property",value:this.config.propertyName,type:"Textbox"},{propertyName:"value",label:"Default Value",value:this.config.value,type:"Numberbox"},{propertyName:"pattern",label:"Regex Pattern",value:this.config.pattern,type:"Textbox"}]}]});renderElement=(e,t)=>{const i=e.prefix,o=e.suffix,a=e.description,n=this.createElement("div",{class:"input-group"});if(!this.isNullOrEmpty(i)){const e=this.createElement("div",{ref:"prefix",class:"input-group-text"});e.innerHTML=i,n.appendChild(e)}const l=this.createElement("div",{class:"form-floating"});n.appendChild(l);const r=this.renderRawElement(e,t);l.appendChild(r);const s=this.createElement("label",{for:`${this.name}-${t}`});if(s.innerHTML=e.label,l.appendChild(s),!this.isNullOrEmpty(o)){const e=this.createElement("div",{ref:"suffix",class:"input-group-text"});e.innerHTML=o,n.appendChild(e)}const p=this.createElement("div",{ref:"element"});if(p.appendChild(n),!this.isNullOrEmpty(a)){const e=this.createElement("div",{class:"form-text text-muted"});e.innerHTML=a,p.appendChild(e)}return p};renderRawElement=(e,t)=>{const i=e.propertyName,o=e.placeholder,a=e.value,n=this.createElement("input",{placeholder:e.label,id:`${this.name}-${t}`,class:"form-control",type:"text",ref:"input"});return n.setAttribute("data-pattern",e.pattern),this.isNullOrEmpty(e.propertyId)||n.setAttribute("data-id",e.propertyId),this.isNullOrEmpty(i)||n.setAttribute("data-property",i),this.isNullOrEmpty(a)||n.setAttribute("value",a),this.isNullOrEmpty(o)||n.setAttribute("placeholder",o),this.isPropExists(e,"validation")&&(this.isPropExists(e.validation,"mandatory")&&n.classList.add("mandatory"),this.isPropExists(e.validation,"lengthCheck")&&("number"==typeof Number(e.validation.lengthCheck.min)&&+e.validation.lengthCheck.min>0&&n.setAttribute("minLength",e.validation.lengthCheck.min),"number"==typeof Number(e.validation.lengthCheck.max)&&+e.validation.lengthCheck.max>0&&n.setAttribute("maxLength",e.validation.lengthCheck.max))),this.attachComponentEventListener(n),n};attachComponentEventListener=e=>{e.removeEventListener("input",this.numberFuncHandler),e.addEventListener("input",this.numberFuncHandler)};numberFuncHandler=event=>{event.preventDefault();const currentValue=event.target.value,pattern=event.target.getAttribute("data-pattern"),numericValue=currentValue.replace(eval(pattern),"");event.target.value=numericValue}}class Occupation extends Base{constructor(e){super(),this.group="Custom",this.name="Occupation",this.version="v1",this.config=void 0!==e?JSON.parse(e):{};let t=this.config;void 0===t.propertyName&&(t.propertyName=""),void 0===t.type&&(t.type="Occupation"),void 0===t.label&&(t.label="Occupation"),void 0===t.labelPosition&&(t.labelPosition="Left-Left"),void 0===t.labelWidth&&(t.labelWidth=30),void 0===t.labelMargin&&(t.labelMargin=3),void 0===t.value&&(t.value=""),void 0===t.case&&(t.case="none"),void 0===t.apiUrl&&(t.apiUrl="https://occ.chooyee.co/api/query/"),void 0===t.validation&&(t.validation={},t.validation.mandatory=!1,void 0===t.validation.lengthCheck&&(t.validation.lengthCheck={},t.validation.lengthCheck.min=0,t.validation.lengthCheck.max=0)),void 0===t.formBuilderMode&&(t.formBuilderMode=!1)}getEditFormJson=()=>({label:"Occupation Component Edit Form",tabs:[{tabLabel:"Display",tabId:"home",components:[{propertyName:"label",label:"Label",placeholder:"Occupation label",description:"Enter the label for this element",validation:{mandatory:!0,lengthCheck:{min:0,max:0}},value:this.config.label,type:"Textbox"},{propertyName:"labelPosition",label:"Label Position",placeholder:"Label Position",description:"Set the position of the label",options:[{Top:"Top"},{"Left-Left":"Left"},{None:"None"}],value:this.config.labelPosition,type:"Select"},{propertyName:"description",label:"Descriptions (Optional)",description:"Description for the element",type:"Textbox",value:this.config.description},{propertyName:"placeholder",label:"Placeholder (Optional)",placeholder:"Placeholder on the element",type:"Textbox",value:this.config.placeholder},{propertyName:"customCss",label:"Custom CSS",placeholder:"custom css",description:"Set the custom css, for ex: form-control form-item",type:"Textbox",value:this.config.customCss}]},{tabLabel:"Validation",tabId:"validate",components:[{propertyGroup:"validation",propertyType:"mandatory",propertyName:"validation-mandatory",label:"This is mandatory field?",value:this.config.validation.mandatory,type:"Checkbox"}]},{tabLabel:"Data",tabId:"data",components:[{propertyName:"propertyName",label:"Data Property",value:this.config.propertyName,type:"Textbox"},{propertyName:"apiUrl",label:"API URL",value:this.config.apiUrl,placeholder:"https://api.allianceplugin.io/occ/autocomplete",description:"Set the api url for the occupation",type:"Textbox"}]}]});renderElement=(e,t)=>{const i=e.prefix,o=e.suffix,a=e.description,n=this.createElement("div",{class:"input-group"});if(!this.isNullOrEmpty(i)){const e=this.createElement("div",{ref:"prefix",class:"input-group-text"});e.innerHTML=i,n.appendChild(e)}const l=this.createElement("div",{class:"form-floating"});n.appendChild(l);const r=this.renderRawElement(e,t);l.appendChild(r);const s=this.createElement("label",{for:`${this.name}-${t}`});if(s.innerHTML=e.label,l.appendChild(s),!this.isNullOrEmpty(o)){const e=this.createElement("div",{ref:"suffix",class:"input-group-text"});e.innerHTML=o,n.appendChild(e)}const p=this.createElement("div",{ref:"element"});if(p.appendChild(n),!this.isNullOrEmpty(a)){const e=this.createElement("div",{class:"form-text text-muted"});e.innerHTML=a,p.appendChild(e)}return p};renderRawElement=(e,t)=>{const i=e.propertyName,o=e.placeholder,a=e.value,n=this.createElement("input",{placeholder:e.label,id:`${this.name}-${t}`,class:"form-control",type:"text",ref:"input"});return this.isNullOrEmpty(e.propertyId)||n.setAttribute("data-id",e.propertyId),this.isNullOrEmpty(i)||n.setAttribute("data-property",i),this.isNullOrEmpty(a)||n.setAttribute("value",a),this.isNullOrEmpty(o)||n.setAttribute("placeholder",o),this.isPropExists(e,"validation")&&this.isPropExists(e.validation,"mandatory")&&n.classList.add("mandatory"),autocomplete(n,e.apiUrl),n}}let autocomplete=(e,t)=>{let i;e.addEventListener("input",(function(e){})),e.addEventListener("keydown",(function(a){var l=document.getElementById(this.id+"autocomplete-list");if(l&&(l=l.getElementsByTagName("div")),40==a.keyCode)i++,o(l);else if(38==a.keyCode)i--,o(l);else if(13==a.keyCode){a.preventDefault(),i>-1&&l&&l[i].click();let o,r,s,p=this.value;if(n(),!p)return!1;i=-1,o=document.createElement("DIV"),o.setAttribute("id",this.id+"autocomplete-list"),o.setAttribute("class","autocomplete-items list-group text-left"),this.parentNode.appendChild(o),fetch(t+this.value).then((e=>{if(!e.ok)throw console.log(e.status),new Error(`HTTP error! Status: ${e.status}`);return e.json()})).then((t=>{for(s=0;s<t.length;s++)r=document.createElement("DIV"),r.setAttribute("class","list-group-item list-group-item-action"),r.innerHTML="<strong>"+t[s].substr(0,p.length)+"</strong>",r.innerHTML+=t[s].substr(p.length),r.innerHTML+="<input type='hidden' value='"+t[s]+"'>",r.addEventListener("click",(function(t){e.value=this.getElementsByTagName("input")[0].value,n()})),o.appendChild(r),console.log(o)})).catch((e=>{throw console.error("Fetch error:",e),e}))}}));let o=e=>{if(!e)return!1;a(e),i>=e.length&&(i=0),i<0&&(i=e.length-1),e[i].classList.add("active")},a=e=>{for(let t=0;t<e.length;t++)e[t].classList.remove("active")},n=t=>{for(var i=document.getElementsByClassName("autocomplete-items"),o=0;o<i.length;o++)t!=i[o]&&t!=e&&i[o].parentNode.removeChild(i[o])};document.addEventListener("click",(function(e){n(e.target)}))};class Password extends Base{constructor(e){super(),this.group="Basic",this.name="Password",this.version="v1",this.config=void 0!==e?JSON.parse(e):{};let t=this.config;void 0===t.propertyName&&(t.propertyName=""),void 0===t.type&&(t.type="Password"),void 0===t.label&&(t.label="My Password"),void 0===t.labelPosition&&(t.labelPosition="Left-Left"),void 0===t.labelWidth&&(t.labelWidth=30),void 0===t.labelMargin&&(t.labelMargin=3),void 0===t.value&&(t.value=""),void 0===t.case&&(t.case="none"),void 0===t.validation&&(t.validation={},t.validation.mandatory=!1,void 0===t.validation.lengthCheck&&(t.validation.lengthCheck={},t.validation.lengthCheck.min=0,t.validation.lengthCheck.max=0)),void 0===t.formBuilderMode&&(t.formBuilderMode=!1)}getEditFormJson=()=>({label:"Password Component Edit Form",tabs:[{tabLabel:"Display",tabId:"home",components:[{propertyName:"label",label:"Label",placeholder:"My Password label",description:"Enter the label for this Password field",validation:{mandatory:!0,lengthCheck:{min:0,max:0}},value:this.config.label,type:"Textbox"},{propertyName:"labelPosition",label:"Label Position",placeholder:"Label Position",description:"Set the position of the label",options:[{Top:"Top"},{"Left-Left":"Left"},{None:"None"}],value:this.config.labelPosition,type:"Select"},{propertyName:"description",label:"Descriptions (Optional)",description:"Description for the Password",type:"Textbox",value:this.config.description},{propertyName:"customCss",label:"Custom CSS",placeholder:"custom css",description:"Set the custom css, for ex: form-control form-item",type:"Textbox",value:this.config.customCss}]},{tabLabel:"Validation",tabId:"validate",components:[{propertyGroup:"validation",propertyType:"mandatory",propertyName:"validation-mandatory",label:"This is mandatory field?",value:this.config.validation.mandatory,type:"Checkbox"},{propertyGroup:"validation",propertyType:"lengthCheck",propertyName:"validation-lengthCheck-min",label:"Minimum Length (Optional)",placeholder:"Minimum Length",type:"Numberbox",value:this.config.validation.lengthCheck.min},{propertyGroup:"validation",propertyType:"lengthCheck",propertyName:"validation-lengthCheck-max",label:"Maximum Length (Optional)",placeholder:"Maximum Length",type:"Numberbox",value:this.config.validation.lengthCheck.max}]},{tabLabel:"Data",tabId:"data",components:[{propertyName:"propertyName",label:"Data Property",value:this.config.propertyName,type:"Textbox"},{propertyName:"value",label:"Default Value",value:this.config.value,type:"Textbox"}]}]});renderElement=(e,t)=>{const i=e.prefix,o=e.suffix,a=e.description,n=this.createElement("div",{class:"input-group"});if(!this.isNullOrEmpty(i)){const e=this.createElement("div",{ref:"prefix",class:"input-group-text"});e.innerHTML=i,n.appendChild(e)}const l=this.createElement("div",{class:"form-floating"});n.appendChild(l);const r=this.renderRawElement(e,t);l.appendChild(r);const s=this.createElement("label",{for:`${this.name}-${t}`});if(s.innerHTML=e.label,l.appendChild(s),!this.isNullOrEmpty(o)){const e=this.createElement("div",{ref:"suffix",class:"input-group-text"});e.innerHTML=o,n.appendChild(e)}const p=this.createElement("div",{ref:"element"});if(p.appendChild(n),!this.isNullOrEmpty(a)){const e=this.createElement("div",{class:"form-text text-muted"});e.innerHTML=a,p.appendChild(e)}return p};renderRawElement=(e,t)=>{const i=e.propertyName,o=e.value,a=this.createElement("input",{placeholder:e.label,id:`${this.name}-${t}`,class:"form-control",type:"password",ref:"input"});return this.isNullOrEmpty(e.propertyId)||a.setAttribute("data-id",e.propertyId),this.isNullOrEmpty(i)||a.setAttribute("data-property",i),this.isNullOrEmpty(o)||a.setAttribute("value",o),this.isPropExists(e,"validation")&&(this.isPropExists(e.validation,"mandatory")&&a.classList.add("mandatory"),this.isPropExists(e.validation,"lengthCheck")&&("number"==typeof Number(e.validation.lengthCheck.min)&&+e.validation.lengthCheck.min>0&&a.setAttribute("minLength",e.validation.lengthCheck.min),"number"==typeof Number(e.validation.lengthCheck.max)&&+e.validation.lengthCheck.max>0&&a.setAttribute("maxLength",e.validation.lengthCheck.max))),a}}class Radio extends Base{constructor(e){super(),this.group="Basic",this.name="Radio",this.version="v1",this.config=void 0!==e?JSON.parse(e):{};let t=this.config;void 0===t.propertyName&&(t.propertyName=""),void 0===t.type&&(t.type="Radio"),void 0===t.label&&(t.label="My Radio"),void 0===t.labelPosition&&(t.labelPosition="Left-Left"),void 0===t.labelWidth&&(t.labelWidth=30),void 0===t.labelMargin&&(t.labelMargin=3),void 0===t.options&&(t.options=["option 1","option 2","option 3"]),void 0===t.formBuilderMode&&(t.formBuilderMode=!1),void 0===t.value&&(t.value=""),void 0===t.validation&&(t.validation={},t.validation.mandatory=!1)}getEditFormJson=()=>({label:"Radio component",tabs:[{tabLabel:"Display",tabId:"home",components:[{propertyName:"label",label:"Label",placeholder:"Label for this element",description:"Enter the label for this element",validate:{mandatory:!0},value:this.config.label,type:"Textbox"},{propertyName:"labelPosition",label:"Label Position",placeholder:"Label Position",description:"Set the position of the label",options:[{Top:"Top"},{"Left-Left":"Left"}],value:this.config.labelPosition,type:"Select"},{propertyName:"description",label:"Descriptions",description:"Description for the element",type:"Textbox",value:this.config.description}]},{tabLabel:"Data",tabId:"data",components:[{propertyId:"targetEditFormOptions",propertyName:"options",label:"Dropdown Options",description:"Enter the dropdown options",type:"Textarea",value:this.optionsToText(this.config.options)},{propertyId:"SourceEditFormOptions",propertyName:"value",label:"Default Select",description:"Enter the dropdown default",type:"Select",options:"No default\n"+this.optionsToText(this.config.options),value:this.config.value,events:[{type:"listenToTarget",target:"targetEditFormOptions",event:"input",handler:"editFormDefaultValueListener"}]}]}]});optionsToText=function(e){return Array.isArray(e)?e.join("\n"):e};renderElement=(e,t)=>{const i=e.description,o=this.createElement("div",{class:"input-group"}),a=this.renderRawElement(e,t);o.appendChild(a);const n=this.createElement("div",{ref:"element"});if(n.appendChild(o),!this.isNullOrEmpty(i)){const e=this.createElement("div",{class:"form-text text-muted"});e.innerHTML=i,n.appendChild(e)}return n};renderRawElement=(e,t)=>{const i=e.propertyName;let o=e.options;const a=e.value,n=this.createElement("div",{"data-property":i,id:`${this.name}-${t}`,class:"form-radio radio",ref:"radioGroup"});this.isNullOrEmpty(e.propertyId)||n.setAttribute("data-id",e.propertyId),"string"==this.trueTypeOf(o)&&(o=o.split("\n"));let l="";return this.isPropExists(e,"validation")&&this.isPropExists(e.validation,"mandatory")&&(l="required"),o.forEach((e=>{if("string"==this.trueTypeOf(e))n.appendChild(this.renderRadioComponent(e,e,t,l));else{const i=Object.keys(e)[0];n.appendChild(this.renderRadioComponent(e[i],i,t,l))}})),this.isPropExists(e,"validation")&&this.isPropExists(e.validation,"mandatory")&&n.classList.add("mandatory"),this.isNullOrEmpty(a)||this.setDefaultOption(n,a),n};renderRadioComponent=(e,t,i,o)=>{const a=this.createElement("div",{class:"radio form-check",ref:"wrapper"}),n=`Radio-${i}-${this.getShortUUID()}`,l=this.createElement("input",{id:n,name:`radio[${i}]`,value:t,class:"form-check-input",type:"radio",ref:"input"});this.isNullOrEmpty(o)||l.setAttribute("required",!0);const r=this.createElement("label",{for:n,class:"form-check-label label-position-right"}),s=this.createElement("span",{});return s.innerHTML=e,a.appendChild(l),a.appendChild(r),r.appendChild(s),a};setDefaultOption(e,t){e.querySelectorAll("[ref='input']").forEach((e=>{e.value===t?(e.checked=!0,e.setAttribute("checked","checked")):e.removeAttribute("checked")}))}}class Select extends Base{constructor(e){super(),this.group="Basic",this.name="Select",this.version="v1",this.config=void 0!==e?JSON.parse(e):{};let t=this.config;void 0===t.propertyName&&(t.propertyName="Select"),void 0===t.type&&(t.type="Select"),void 0===t.label&&(t.label="My Dropdown"),void 0===t.labelPosition&&(t.labelPosition="Left-Left"),void 0===t.labelWidth&&(t.labelWidth=30),void 0===t.labelMargin&&(t.labelMargin=3),void 0===t.options&&(t.options=["option 1","option 2","option 3"]),void 0===t.formBuilderMode&&(t.formBuilderMode=!1),void 0===t.value&&(t.value=""),void 0===t.validation&&(t.validation={},t.validation.mandatory=!1,void 0===t.validation.lengthCheck&&(t.validation.lengthCheck={},t.validation.lengthCheck.min=0,t.validation.lengthCheck.max=0))}getEditFormJson=()=>({label:"Text Field",tabs:[{tabLabel:"Display",tabId:"home",components:[{propertyName:"label",label:"Label",placeholder:"Label for this element",description:"Enter the label for this element",validate:{mandatory:!0},value:this.config.label,type:"Textbox"},{propertyName:"labelPosition",label:"Label Position",placeholder:"Label Position",description:"Set the position of the label",options:[{Top:"Top"},{"Left-Left":"Left"},{None:"None"}],value:this.config.labelPosition,type:"Select"},{propertyName:"description",label:"Descriptions",description:"Description for the element",type:"Textbox",value:this.config.description}]},{tabLabel:"Data",tabId:"data",components:[{propertyId:"targetEditFormOptions",propertyName:"options",label:"Dropdown Options",description:"Enter the dropdown options",type:"Textarea",value:this.optionsToText(this.config.options)},{propertyId:"SourceEditFormOptions",propertyName:"value",label:"Default Select",description:"Enter the dropdown default",type:"Select",options:"No default\n"+this.optionsToText(this.config.options),value:this.config.value,events:[{type:"listenToTarget",target:"targetEditFormOptions",event:"input",handler:"editFormDefaultValueListener"}]}]}]});optionsToText=function(e){return Array.isArray(e)?e.join("\n"):e};renderElement=(e,t)=>{const i=e.description,o=this.createElement("div",{class:"input-group"}),a=this.createElement("div",{class:"form-floating"});o.appendChild(a);const n=this.renderRawElement(e,t);a.appendChild(n);const l=this.createElement("label",{for:`${this.name}-${t}`});l.innerHTML=e.label,a.appendChild(l);const r=this.createElement("div",{ref:"element"});if(r.appendChild(o),!this.isNullOrEmpty(i)){const e=this.createElement("div",{class:"form-text text-muted"});e.innerHTML=i,r.appendChild(e)}return r};renderRawElement=(e,t)=>{const i=`${this.name}-${t}`,o=e.propertyName,a=e.placeholder;let n=e.options;const l=e.value,r=this.createElement("select",{placeholder:e.label,"data-property":o,id:i,class:"form-control",type:"text",ref:"input"});return this.isNullOrEmpty(e.propertyId)||r.setAttribute("data-id",e.propertyId),"string"==this.trueTypeOf(n)&&(n=n.split("\n")),n.forEach((e=>{if("string"==this.trueTypeOf(e))r.add(new Option(e,e));else{const t=Object.keys(e)[0];r.add(new Option(e[t],t))}})),this.isNullOrEmpty(a)||r.setAttribute("placeholder",a),this.isPropExists(e,"validation")&&this.isPropExists(e.validation,"mandatory")&&r.classList.add("mandatory"),this.isNullOrEmpty(l)||this.setDefaultOption(r,l),r};setDefaultOption(e,t){if(e)for(let i=0;i<e.options.length;i++){const o=e.options[i];if(o.value===t){o.selected=!0,o.setAttribute("selected",!0);break}}}static editFormDefaultValueListener=function(e,t,i){const o=document.querySelector(`[data-id="${t}"]`),a=document.querySelector(`[data-id="${i}"]`);Select.removeListeners(o,e),o.addEventListener(e,(function(e){let t=e.target.value;a.innerHTML="",a.add(new Option("No default","No default")),"string"==Select.trueTypeOf(t)&&(t=t.split("\n")),t.forEach((e=>{if("string"==Select.trueTypeOf(e))a.add(new Option(e,e));else{const t=Object.keys(e)[0];a.add(new Option(e[t],t))}}))}))}}class Text extends Base{constructor(e){super(),this.group="Basic",this.name="Text",this.version="v1",this.config=void 0!==e?JSON.parse(e):{};let t=this.config;void 0===t.propertyName&&(t.propertyName=""),void 0===t.type&&(t.type="Text"),void 0===t.position&&(t.position="left"),void 0===t.value&&(t.value=""),void 0===t.letterCase&&(t.letterCase="none"),void 0===t.formBuilderMode&&(t.formBuilderMode=!1)}getEditFormJson=()=>({label:"Text Component Edit Form",tabs:[{tabLabel:"Display",tabId:"home",components:[{propertyName:"value",label:"Text",placeholder:"My Textbox label",description:"Enter the text",value:this.config.value,type:"Textarea"},{propertyName:"position",label:"Text Position",description:"Set the position of the text",options:[{left:"left"},{center:"center"},{right:"right"}],value:this.config.position,type:"Select"},{propertyName:"letterCase",label:"Lettercase",description:"Select the letter case for the header",value:this.config.letterCase,options:[{none:"None"},{upper:"Uppercase"},{lower:"Lowercase"},{capital:"Capital"}],type:"Select"}]},{tabLabel:"Data",tabId:"data",components:[{propertyName:"propertyName",label:"Data Property",value:this.config.propertyName,type:"Textbox"}]}]});renderElement=(e,t)=>{const i=e.description,o=this.createElement("div",{class:"d-flex"});"center"===e.position?o.classList.add("justify-content-center","align-items-center"):"right"===e.position&&o.classList.add("justify-content-end","align-items-right");const a=this.renderRawElement(e,t);o.appendChild(a);const n=this.createElement("div",{ref:"element"});if(n.appendChild(o),!this.isNullOrEmpty(i)){const t=this.createElement("div",{class:"d-flex form-text text-muted"});"center"===e.position?t.classList.add("justify-content-center","align-items-center"):"right"===e.position&&t.classList.add("justify-content-end","align-items-right"),t.innerHTML=i,n.appendChild(t)}return n};renderRawElement=(e,t)=>{const i=e.propertyName,o=e.letterCase,a=e.value,n=this.createElement("p",{id:`${this.name}-${t}`,ref:"input"});switch(this.isNullOrEmpty(e.propertyId)||n.setAttribute("data-id",e.propertyId),this.isNullOrEmpty(i)||n.setAttribute("data-property",i),this.isNullOrEmpty(a)||(n.innerHTML=a),o){case"upper":n.classList.add("text-uppercase");break;case"lower":n.classList.add("text-lowercase");break;case"capital":n.classList.add("text-capitalize")}return n}}class Textarea extends Base{constructor(e){super(),this.group="Basic",this.version="v1",this.name="Textarea",this.config=void 0!==e?JSON.parse(e):{};let t=this.config;void 0===t.propertyName&&(t.propertyName="textarea"),void 0===t.type&&(t.type="Textarea"),void 0===t.label&&(t.label="My Text Area"),void 0===t.labelPosition&&(t.labelPosition="Left-Left"),void 0===t.labelWidth&&(t.labelWidth=30),void 0===t.labelMargin&&(t.labelMargin=3),void 0===t.rows&&(t.rows=3),void 0===t.letterCase&&(t.letterCase="none"),void 0===t.value&&(t.value=""),void 0===t.required&&(t.required=!1),t.required="on"==t.required,void 0===t.minLength&&(t.minLength=0),void 0===t.maxLength&&(t.maxLength=0),void 0===t.formBuilderMode&&(t.formBuilderMode=!1),void 0===t.validation&&(t.validation={},t.validation.mandatory=!1,void 0===t.validation.lengthCheck&&(t.validation.lengthCheck={},t.validation.lengthCheck.min=0,t.validation.lengthCheck.max=0))}getEditFormJson=()=>({label:"Text Area Component Edit Form",tabs:[{tabLabel:"Display",tabId:"home",components:[{propertyName:"label",label:"Label",placeholder:"My Text Area label",description:"Enter the label for this text area",validation:{mandatory:!0,lengthCheck:{min:0,max:0}},value:this.config.label,type:"Textbox"},{propertyName:"labelPosition",label:"Label Position",placeholder:"Label Position",description:"Set the position of the label",options:[{Top:"Top"},{"Left-Left":"Left"},{None:"None"}],value:this.config.labelPosition,type:"Select"},{propertyName:"description",label:"Descriptions (Optional)",description:"Description for text area",type:"Textbox",value:this.config.description},{propertyName:"rows",label:"Rows",type:"Textbox",value:this.config.rows},{propertyName:"customCss",label:"Custom CSS",placeholder:"custom css",description:"Set the custom css, for ex: form-control form-item",type:"Textbox",value:this.config.customCss}]},{tabLabel:"Validation",tabId:"validate",components:[{propertyGroup:"validation",propertyType:"mandatory",propertyName:"validation-mandatory",label:"This is mandatory field?",value:this.config.validation.mandatory,type:"Checkbox"},{propertyGroup:"validation",propertyType:"lengthCheck",propertyName:"validation-lengthCheck-min",label:"Minimum Length (Optional)",placeholder:"Minimum Length",type:"Textbox",value:this.config.validation.lengthCheck.min},{propertyGroup:"validation",propertyType:"lengthCheck",propertyName:"validation-lengthCheck-max",label:"Maximum Length (Optional)",placeholder:"Maximum Length",type:"Textbox",value:this.config.validation.lengthCheck.max}]},{tabLabel:"Data",tabId:"data",components:[{propertyName:"propertyName",label:"Data Property",value:this.config.propertyName,type:"Textbox"},{propertyName:"value",label:"Default Value",value:this.config.value,type:"Textarea"}]}]});renderElement=(e,t)=>{const i=e.description,o=this.createElement("div",{class:"input-group"}),a=this.createElement("div",{class:"form-floating"});o.appendChild(a);const n=this.renderRawElement(e,t);a.appendChild(n);const l=this.createElement("label",{for:`${this.name}-${t}`});l.innerHTML=e.label,a.appendChild(l);const r=this.createElement("div",{ref:"element"});if(r.appendChild(o),!this.isNullOrEmpty(i)){const e=this.createElement("div",{class:"form-text text-muted"});e.innerHTML=i,r.appendChild(e)}return r};renderRawElement=(e,t)=>{const i=e.propertyName,o=e.value,a=e.rows,n=this.createElement("textarea",{style:"height:100%",placeholder:e.label,"data-property":i,id:`${this.name}-${t}`,class:"form-control",type:"textarea",rows:a,ref:"input"});switch(this.isNullOrEmpty(e.propertyId)||n.setAttribute("data-id",e.propertyId),this.isPropExists(e,"validation")&&(this.isPropExists(e.validation,"mandatory")&&n.classList.add("mandatory"),this.isPropExists(e.validation,"lengthCheck")&&("number"==typeof Number(e.validation.lengthCheck.min)&&+e.validation.lengthCheck.min>0&&n.setAttribute("minLength",e.validation.lengthCheck.min),"number"==typeof Number(e.validation.lengthCheck.max)&&+e.validation.lengthCheck.max>0&&n.setAttribute("maxLength",e.validation.lengthCheck.max))),this.isNullOrEmpty(o)||(n.innerHTML=o),e.letterCase){case"upper":n.classList.add("text-uppercase");break;case"lower":n.classList.add("text-lowercase");break;case"capital":n.classList.add("text-capitalize")}return n}}class Textbox extends Base{constructor(e){super(),this.group="Basic",this.name="Textbox",this.version="v1",this.config=void 0!==e?JSON.parse(e):{};let t=this.config;void 0===t.propertyName&&(t.propertyName=""),void 0===t.type&&(t.type="Textbox"),void 0===t.label&&(t.label="My Textbox"),void 0===t.labelPosition&&(t.labelPosition="Left-Left"),void 0===t.labelWidth&&(t.labelWidth=30),void 0===t.labelMargin&&(t.labelMargin=3),void 0===t.value&&(t.value=""),void 0===t.letterCase&&(t.letterCase="none"),void 0===t.validation&&(t.validation={},t.validation.mandatory=!1,void 0===t.validation.lengthCheck&&(t.validation.lengthCheck={},t.validation.lengthCheck.min=0,t.validation.lengthCheck.max=0)),void 0===t.visibility&&(t.visibility={},void 0===t.visibility.simple&&(t.visibility.simple={},t.visibility.simple.target="",t.visibility.simple.value="")),void 0===t.formBuilderMode&&(t.formBuilderMode=!1)}getEditFormJson=()=>({label:"Text Field Component Edit Form",tabs:[{tabLabel:"Display",tabId:"home",components:[{propertyName:"label",label:"Label",placeholder:"My Textbox label",description:"Enter the label for this text field",validation:{mandatory:!0,lengthCheck:{min:0,max:0}},value:this.config.label,type:"Textbox"},{propertyName:"labelPosition",label:"Label Position",placeholder:"Label Position",description:"Set the position of the label",options:[{Top:"Top"},{"Left-Left":"Left"},{None:"None"}],value:this.config.labelPosition,type:"Select"},{propertyName:"description",label:"Descriptions (Optional)",description:"Description for the textbox",type:"Textbox",value:this.config.description},{propertyName:"prefix",label:"Prefix (Optional)",placeholder:"Prefix",description:"Set the prefix infront of the text field, for ex: {RM} [textbox]",type:"Textbox",value:this.config.prefix},{propertyName:"suffix",label:"Suffix (Optional)",placeholder:"Suffix",description:"Set the prefix infront of the text field, for ex: [textbox] {RM}",type:"Textbox",value:this.config.suffix},{propertyName:"customCss",label:"Custom CSS",placeholder:"custom css",description:"Set the custom css, for ex: form-control form-item",type:"Textbox",value:this.config.customCss}]},{tabLabel:"Validation",tabId:"validate",components:[{propertyGroup:"validation",propertyType:"mandatory",propertyName:"validation-mandatory",label:"This is mandatory field?",value:this.config.validation.mandatory,type:"Checkbox"},{propertyGroup:"validation",propertyType:"lengthCheck",propertyName:"validation-lengthCheck-min",label:"Minimum Length (Optional)",placeholder:"Minimum Length",type:"Numberbox",value:this.config.validation.lengthCheck.min},{propertyGroup:"validation",propertyType:"lengthCheck",propertyName:"validation-lengthCheck-max",label:"Maximum Length (Optional)",placeholder:"Maximum Length",type:"Numberbox",value:this.config.validation.lengthCheck.max}]},{tabLabel:"Data",tabId:"data",components:[{propertyName:"propertyName",label:"Data Property",value:this.config.propertyName,type:"Textbox"},{propertyName:"value",label:"Default Value",value:this.config.value,type:"Textbox"}]}]});renderElement=(e,t)=>{const i=e.prefix,o=e.suffix,a=e.description,n=this.createElement("div",{class:"input-group"});if(!this.isNullOrEmpty(i)){const e=this.createElement("div",{ref:"prefix",class:"input-group-text"});e.innerHTML=i,n.appendChild(e)}const l=this.createElement("div",{class:"form-floating"});n.appendChild(l);const r=this.renderRawElement(e,t);l.appendChild(r);const s=this.createElement("label",{for:`${this.name}-${t}`});if(s.innerHTML=e.label,l.appendChild(s),!this.isNullOrEmpty(o)){const e=this.createElement("div",{ref:"suffix",class:"input-group-text"});e.innerHTML=o,n.appendChild(e)}const p=this.createElement("div",{ref:"element"});if(p.appendChild(n),!this.isNullOrEmpty(a)){const e=this.createElement("div",{class:"form-text text-muted"});e.innerHTML=a,p.appendChild(e)}return p};renderRawElement=(e,t)=>{const i=e.propertyName,o=(e.placeholder,e.letterCase),a=e.value,n=this.createElement("input",{placeholder:e.label,id:`${this.name}-${t}`,class:"form-control",type:"text",ref:"input"});switch(this.isNullOrEmpty(e.propertyId)||n.setAttribute("data-id",e.propertyId),this.isNullOrEmpty(i)||n.setAttribute("data-property",i),this.isNullOrEmpty(a)||n.setAttribute("value",a),o){case"upper":n.classList.add("text-uppercase");break;case"lower":n.classList.add("text-lowercase");break;case"capital":n.classList.add("text-capitalize")}return this.isPropExists(e,"validation")&&(this.isPropExists(e.validation,"mandatory")&&n.classList.add("mandatory"),this.isPropExists(e.validation,"lengthCheck")&&("number"==typeof Number(e.validation.lengthCheck.min)&&+e.validation.lengthCheck.min>0&&n.setAttribute("minLength",e.validation.lengthCheck.min),"number"==typeof Number(e.validation.lengthCheck.max)&&+e.validation.lengthCheck.max>0&&n.setAttribute("maxLength",e.validation.lengthCheck.max))),n};static editFormButtonActionTypeChangeListener=(e,t,i)=>{const o=document.querySelector(`[data-id="${t}"]`),a=document.querySelector(`[data-id="${i}"]`);o.addEventListener(e,(function(e){Textbox.editFormButtonActionTypeChangeHandler(o,a)})),o.dispatchEvent(new Event("change"))};static editFormButtonActionTypeChangeHandler=(e,t)=>{const i=t.closest("div.builder-component");"Post"===e.value?i.style.display="block":i.style.display="none"}}