{"mappings":"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","sources":["src/js/main.js","src/js/common/fetch.js"],"sourcesContent":["const fetchGet = require('./common/fetch'); \r\n\r\n\r\n\r\nconst modalBox = document.getElementById(\"myModal\"); \r\nconst modalTitle = document.getElementById(\"modalLongTitle\"); \r\nconst modalBody = document.querySelector(\".modal-body\");  \r\nconst closeModals = document.querySelectorAll('[data-dismiss=\"modal\"]');\r\nconst editModalBox = new bootstrap.Modal(modalBox);\r\nconst btnRemove = document.getElementById(\"btnRemove\"); \r\nconst btnCancel = document.getElementById(\"btnCancel\"); \r\nconst btnSave = document.getElementById(\"btnSave\"); \r\n\r\n//const nodropElements = document.querySelectorAll(\".no-drop\");\r\nconst draggables = [...document.querySelectorAll(\".draggable\")];\r\nconst dropzones = [...document.querySelectorAll(\".dropzone\")];\r\n\r\nvar curMirrorElement;\r\nvar curZone;\r\nvar editor = ace.edit(\"form-json\");\r\nvar formElementJsonConfig = [];\r\n\r\nconst className= \"Select\";\r\nconst h = new (eval(className))();\r\nconsole.log(h);\r\ndocument.addEventListener('DOMContentLoaded', function () {\r\n  const mainContainer = document.querySelector('[ref=\"container\"]');  \r\n  const mainContainerJson = {};\r\n  mainContainerJson[\"element-id\"] = mainContainer.id;\r\n  mainContainerJson[\"element-group\"] = \"default\"\r\n  mainContainerJson[\"element-version\"] = \"v1\";\r\n  mainContainerJson[\"element-type\"] = \"container\";\r\n  mainContainerJson[\"element-parent\"] = \"\";\r\n  mainContainerJson[\"components\"] = [];\r\n  formElementJsonConfig.push(mainContainerJson);\r\n\r\n  //editor.setTheme(\"ace/theme/monokai\");\r\n  editor.session.setMode(\"ace/mode/json\");\r\n  editor.session.setUseWrapMode(true);\r\n  editor.setHighlightActiveLine(false);\r\n  \r\n  modalBox.addEventListener('hidden.bs.modal', function (event) {\r\n    // do something...\r\n    const _component_edit_mode = document.querySelector(\".modal-edit-mode\");\r\n    if (_component_edit_mode){  \r\n      _component_edit_mode.classList.remove(\"modal-edit-mode\");\r\n    }\r\n  })\r\n\r\n  closeModals.forEach((close)=>{\r\n    close.addEventListener(\"click\",(e)=>{\r\n      e.preventDefault();\r\n      const _mirror = document.querySelector(\".drag-mirror\");  \r\n      if (_mirror){\r\n        const buttonRef = e.target.getAttribute(\"ref\");\r\n        if (_mirror.getAttribute(\"ref\")===\"sidebar-component\"|| buttonRef=='modal-remove')\r\n        {\r\n          //curZone.removeChild(_mirror);\r\n          _mirror.remove();\r\n        \r\n        }\r\n      }\r\n\r\n      const _component_edit_mode = document.querySelector(\".modal-edit-mode\");  \r\n      //console.log(_component_edit_mode)\r\n      if (_component_edit_mode){\r\n        const buttonRef = e.target.getAttribute(\"ref\");\r\n        if (buttonRef=='modal-remove')\r\n        {\r\n          //curZone.removeChild(_component_edit_mode);\r\n          _component_edit_mode.remove();\r\n        \r\n        }\r\n      }\r\n      editModalBox.hide();\r\n      \r\n    });\r\n  });\r\n\r\n  btnSave.addEventListener(\"click\", (e)=>{\r\n    e.preventDefault();\r\n    let editComponents = document.querySelectorAll(\".drag-mirror,div.modal-edit-mode\"); \r\n    if (editComponents.length>0)\r\n    {\r\n      const editComponent = editComponents[0];\r\n      //if (curEl) curZone.removeChild(curEl);\r\n      btnModalSaveEventHandler(editComponent.dataset.type, editComponent);\r\n    }      \r\n  })\r\n\r\n  draggables.forEach((draggable) => {\r\n    draggableHandler(draggable);\r\n  });\r\n\r\n  dropzones.forEach((zone) => {\r\n    zone.addEventListener(\"dragover\", (e) => {\r\n      dropZoneDragoverEventHandler(zone, e);\r\n    });\r\n\r\n    zone.addEventListener(\"dragenter\", (e) => { });\r\n\r\n    zone.addEventListener(\"dragleave\", (e) => {  \r\n      dropZoneDragleaveEventHandler(zone, e);\r\n    });\r\n\r\n    zone.addEventListener(\"drop\", (e) => {\r\n      console.log(\"drop\");\r\n      //curZone = zone;\r\n      elementDropped(zone, e);\r\n    });\r\n\r\n  });\r\n  \r\n});\r\n\r\n//=========================================================================\r\n//Event Listener Handler\r\n //=========================================================================\r\ndraggableHandler=(draggable)=>\r\n{\r\n  draggable.setAttribute('draggable', true);\r\n\r\n  draggable.addEventListener(\"dragstart\", (e) => {\r\n    console.log(\"dragstart\");\r\n    console.log(e.target);\r\n    if (e.target.getAttribute(\"ref\")==='sidebar-component')\r\n    {\r\n      draggable.classList.add(\"drag-transit\");        \r\n    }\r\n    else{\r\n      const dragComponent = e.target.closest(\"div.builder-component\");\r\n      dragComponent.classList.add(\"drag-transit\", \"drag-highlight\");    \r\n    }\r\n  });\r\n\r\n  draggable.addEventListener(\"dragend\", (e) => {\r\n    console.log(\"dragend\");\r\n    //console.log(e.target);\r\n    draggable.classList.remove(\"drag-transit\", \"drag-highlight\");\r\n    elementDropped(e);\r\n    \r\n  });//dragend\r\n}\r\n\r\ndragComponentEventListeners=(el)=>\r\n{      \r\n  //builderElementDragHandler(document.getElementById(el.id));\r\n\r\n  if (el.getAttribute(\"ref\")==='dragComponent')\r\n  {\r\n    const becRemove = el.querySelector('[ref=\"removeComponent\"]');      \r\n    becRemove.addEventListener(\"click\", becRemoveEventHandler);\r\n\r\n    const becEdit = el.querySelector('[ref=\"editComponent\"]');      \r\n    becEdit.addEventListener(\"click\", becEditEventHandler);\r\n    draggableHandler(el);\r\n  }\r\n}\r\n\r\nbecRemoveEventHandler=(e)=>{\r\n  const thisEl = e.target.closest('div.builder-component');\r\n  thisEl.remove();\r\n  formElementJsonConfig = removeJsonElement(formElementJsonConfig, \"component-\" + thisEl.id);\r\n  //console.log(formElementJsonConfig);\r\n  refreshEditor();\r\n}\r\n\r\nbecEditEventHandler=(e)=>{\r\n  const thisEl = e.target.closest('div.builder-component');\r\n  const jsonConfig = getFormElementJsonConfig(\"component-\" + thisEl.id);\r\n  thisEl.classList.add(\"modal-edit-mode\");\r\n  thisEl.setAttribute(\"data-type\", jsonConfig[\"element-type\"])\r\n  const el = CreateInstance(jsonConfig[\"element-type\"], JSON.stringify(jsonConfig));\r\n\r\n  modalTitle.innerHTML = `${el.group} - ${el.name} - ${el.version}`;\r\n  modalBody.innerHTML = '';\r\n  modalBody.appendChild(el.renderEditForm());\r\n  el.attachEditFormEvent();\r\n  \r\n  editModalBox.show();     \r\n}\r\n\r\nbtnModalSaveEventHandler=(domElementType, curDomElement)=>{\r\n  const elementsWithRefInput = modalBox.querySelectorAll('[ref=\"input\"]');\r\n\r\n  // Now you can work with the selected elements\r\n  let config = {};\r\n  for (const element of elementsWithRefInput) {          \r\n    const propName = element.dataset.property;\r\n   \r\n    if (element.type=='checkbox' && !element.checked)\r\n    {\r\n      continue;\r\n    }\r\n\r\n    const propNameBuilder = propName.split('-');\r\n    if (propNameBuilder.length>1)\r\n    {\r\n      let currentObj = config;\r\n      for(let i =0; i<propNameBuilder.length;i++)\r\n      {\r\n        const part = propNameBuilder[i];\r\n        if (!currentObj.hasOwnProperty(part)) {\r\n          currentObj[part]={};              \r\n        }   \r\n        if (i < propNameBuilder.length - 1) {\r\n            currentObj = currentObj[part];\r\n          }         \r\n      }\r\n\r\n      //currentObj = element.value;\r\n      //eval(\"config.\" + propNameBuilder.join(\".\") + \"='\" + element.value + \"'\");\r\n      //console.log(`config.${propNameBuilder.join(\".\")} = '${element.value}'`);\r\n      eval(`config.${propNameBuilder.join(\".\")} = '${element.value}'`);\r\n      \r\n      //console.log(config);\r\n    }\r\n    else{\r\n      //currentObj\r\n      config[propNameBuilder[0]] = element.value;\r\n    }\r\n   \r\n    //console.log(element.type + \":\" + element.value );\r\n  }\r\n\r\n  //console.log(config)\r\n  config.formBuilderMode = true;\r\n        \r\n  const el =  CreateInstance(domElementType, JSON.stringify(config)); \r\n\r\n  config=el.config;\r\n\r\n  const zone = curDomElement.closest('[ref=\"container\"]');\r\n  //console.log(zone)\r\n  zone.insertBefore(el.renderDomElement(), curDomElement);      \r\n  zone.removeChild(curDomElement);\r\n \r\n  //el.attachComponentEventListener();\r\n    //assign event to buildereditcomponents\r\n    //Prepare for Json\r\n  config[\"element-id\"] = \"component-\" + el.elementId;\r\n  config[\"element-group\"] = el.group;\r\n  config[\"element-version\"] = el.version;\r\n  config[\"element-type\"] = el.config.type;\r\n\r\n  const newDomEl = document.getElementById(el.elementId)\r\n  config[\"element-parent\"] = newDomEl.closest('[ref=\"container\"]').id;\r\n  formElementJsonConfig.push(config);\r\n\r\n  //console.log(formElementJsonConfig)\r\n  dragComponentEventListeners(newDomEl);\r\n\r\n  refreshEditor();\r\n\r\n  editModalBox.hide();\r\n}\r\n\r\ndropZoneDragoverEventHandler=(zone, e)=>{\r\n  //console.log(zone)\r\n  e.preventDefault();\r\n  let _mirror = document.querySelector(\".drag-mirror\");  \r\n  // console.log(\"dragover\")\r\n  // console.log(_mirror)\r\n  if (!_mirror){     \r\n\r\n    //e,target is drop container\r\n    const targetEl  = document.querySelector(\".drag-transit\");\r\n    \r\n    _mirror = targetEl.cloneNode(true);\r\n    _mirror.classList.add(\"drag-mirror\");\r\n    _mirror.classList.remove(\"drag-transit\");\r\n    // zone.appendChild(draggable);\r\n    const y = event.clientY;\r\n    const x = event.clientX;\r\n    const item = getReference(zone, _mirror, x,y);\r\n    \r\n    curMirrorElement = item;\r\n    zone.insertBefore(_mirror, item);\r\n    curZone=zone;\r\n    //if (targetEl.getAttribute(\"ref\") ==='dragComponent') {targetEl.remove();}\r\n  }\r\n}\r\n\r\ndropZoneDragleaveEventHandler=(zone, e)=>{\r\n  e.preventDefault();\r\n  console.log(\"dragleave\");\r\n  const _mirror = document.querySelector(\".drag-mirror\");  \r\n  if (_mirror){   \r\n    const y = event.clientY;\r\n    const x = event.clientX;\r\n    const item = getReference(zone, _mirror, x,y);\r\n    if (item!=curMirrorElement && item!=_mirror)\r\n    {\r\n      curMirrorElement = \"\";          \r\n      _mirror.remove();\r\n      //zone.removeChild(_mirror);\r\n    }\r\n  }\r\n}\r\nelementDropped=(zone, e)=>{\r\n  const _mirror = document.querySelector(\".drag-mirror\");\r\n  \r\n  hide(document.querySelector(\".drag-and-drop-alert\"));\r\n  if (_mirror){     \r\n  \r\n    const componentType = _mirror.getAttribute(\"ref\");        \r\n    if (componentType==='sidebar-component'){          \r\n      \r\n      const el = CreateInstance(_mirror.dataset.type, '{\"formBuilderMode\":true}');\r\n      el.Test();\r\n      modalTitle.innerHTML = `${el.group} - ${el.name} - ${el.version}`;\r\n      modalBody.innerHTML = '';\r\n      modalBody.appendChild(el.renderEditForm());\r\n      el.attachEditFormEvent();\r\n      editModalBox.show();     \r\n    }\r\n    else{\r\n      const element = document.querySelector(`#${_mirror.id}:not(.drag-mirror)`);\r\n      //console.log(element)\r\n      const dropZone = _mirror.closest('[ref=\"container\"]');\r\n      dropZone.insertBefore(element, _mirror);\r\n      _mirror.remove();\r\n      // //console.log(element)\r\n      // _mirror.classList.remove(\"drag-mirror\");\r\n      // element.remove();\r\n      // dragComponentEventListeners(_mirror)\r\n    }\r\n    refreshEditor();\r\n  }\r\n}\r\n//=========================================================================\r\n//End Event Listener Handler\r\n //=========================================================================\r\n\r\n\r\nfunction getReference (dropTarget, target, x, y) {\r\n  const horizontal = false;\r\n  var reference = outside();\r\n  //console.log(reference)\r\n  return reference;\r\n\r\n  function outside () { // slower, but able to figure out any position\r\n    var len = dropTarget.children.length;\r\n    var i;\r\n    var el;\r\n    var rect;\r\n    for (i = 0; i < len; i++) {\r\n      el = dropTarget.children[i];\r\n      rect = el.getBoundingClientRect();\r\n      //if (horizontal && (rect.left + rect.width / 2) > x) { return el; }\r\n      if ((rect.left + rect.width / 3) > x && (rect.top + rect.height / 3) > y) { return el; }\r\n    }\r\n    return null;\r\n  }\r\n}\r\n\r\nfunction CreateInstance(classNameString, json)\r\n{\r\n  var obj = new (eval(classNameString))(json);\r\n  return obj\r\n}\r\n\r\nfunction removeJsonElement(jsonComponent, elementId) {\r\n  //console.log(elementId)\r\n  if (Array.isArray(jsonComponent)) {\r\n    for (let i = 0; i < jsonComponent.length; i++) {\r\n      const com = jsonComponent[i];\r\n      if (com[\"element-type\"] === 'Column') {\r\n        com[\"columns\"].forEach((e) => {\r\n          e[\"components\"] = removeJsonElement(e[\"components\"], elementId);\r\n        });\r\n      } else {\r\n        if (com[\"element-id\"] === elementId) {\r\n          jsonComponent.splice(i, 1);\r\n          // console.log(\"removeJsonElement- remove\")\r\n          // console.log(jsonComponent)\r\n          i--; // Decrement i to account for the removed element\r\n        }\r\n      }\r\n    }\r\n  }\r\n  // console.log(\"removeJsonElement- final\")\r\n  // console.log(jsonComponent)\r\n  return jsonComponent;\r\n}\r\n\r\nfunction getFormElementJsonConfig(elementId) {\r\n  const jsonObj = formElementJsonConfig;\r\n  if (Array.isArray(jsonObj)) {\r\n    for (let i = 0; i < jsonObj.length; i++) {\r\n      if (jsonObj[i][\"element-id\"]===elementId)\r\n      {\r\n        return jsonObj[i];\r\n      }\r\n    }\r\n    return null;\r\n  }     \r\n  return null;\r\n}\r\n\r\nfunction refreshEditor()\r\n{ \r\n  //Get first element - Main Container\r\n  const mainContainer = document.getElementById(formElementJsonConfig[0][\"element-id\"]);\r\n  const formElementJsonRep = formElementJsonConfig[0];\r\n  formElementJsonRep.components = getAllChildElementsRecursive(mainContainer);\r\n  editor.setValue(JSON.stringify(formElementJsonRep, null, '\\t'));\r\n\r\n  //console.log(formElementJsonConfig)\r\n}\r\n\r\nfunction getAllChildElementsRecursive(parentElement, result = []) {\r\n  var children = parentElement.children;\r\n  //var children = parentElement.querySelectorAll(\".builder-component,.drag-container\");\r\n  for (let i = 0; i < children.length; i++) {\r\n    \r\n    const domComponent = children[i].querySelector('[ref=\"component\"]');\r\n    if (domComponent){    \r\n      //console.log(domComponent.id)   \r\n      const jsonComponent = getFormElementJsonConfig(domComponent.id);\r\n       \r\n      if (jsonComponent[\"element-type\"]===\"Column\")\r\n      {\r\n        result.push(jsonComponent);\r\n        const elementId = domComponent.id.split(\"-\")[1];\r\n        const query = `[ref=\"col\"][data-parent=\"Column-${elementId}\"]`;\r\n        //console.log(t)\r\n        const cols = domComponent.querySelectorAll(query); \r\n           \r\n        let colNumber = 0;\r\n         \r\n        cols.forEach((col)=>{                \r\n          jsonComponent[\"columns\"][colNumber][\"components\"]=[];\r\n          getAllChildElementsRecursive(col, jsonComponent[\"columns\"][colNumber][\"components\"]);              \r\n          colNumber++;\r\n        })            \r\n      }\r\n      else\r\n      {\r\n        result.push(jsonComponent);\r\n      }\r\n    }        \r\n    \r\n  }\r\n  \r\n  return result;\r\n}\r\n\r\nvar show = function (elem) {\r\n  elem.style.display = 'block';\r\n};\r\n\r\n// Hide an element\r\nvar hide = function (elem) {\r\n  elem.style.display = 'none';\r\n};\r\nisNullOrEmpty=function (value) {\r\n  return value === null || value === undefined || (typeof value === 'string' && value.trim() === '') || (Array.isArray(value) && value.length === 0);\r\n};","const fetchOptions = {\r\n\tmethod: 'GET', // HTTP method (GET, POST, etc.)\r\n\theaders: {\r\n\t  'Content-Type': 'application/json', // Request headers\r\n\t  // Add any other headers you need\r\n\t},\r\n\t// You can add more options like 'body' for POST requests, 'mode', 'credentials', etc.\r\n  };\r\n\r\nconst fetchGet = (apiUrl, fetchOptions)=>{\r\n  \treturn fetch(apiUrl, fetchOptions)\r\n\t.then((response) => {\r\n\t\t// Check if the response status is OK (200)\r\n\t\tif (!response.ok) {\r\n\t\t\tconsole.log(response.status);\r\n\t\t\tthrow new Error(`HTTP error! Status: ${response.status}`);\r\n\t\t}\r\n\t\t// Parse the response JSON\t\t\r\n\t\treturn response.json();\r\n\t})\r\n\t.catch((error) => {\r\n\t\tconsole.error('Fetch error:', error);\r\n\t\tthrow error; // Rethrow the error to propagate it to the caller\r\n\t});\r\n\r\n};\r\nmodule.exports = fetchGet;\r\n  // Use the Fetch API to make a request with the specified options\r\n"],"names":[],"version":3,"file":"main.js.map"}