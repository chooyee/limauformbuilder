{"mappings":"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","sources":["src/js/main.js","src/js/common/fetch.js"],"sourcesContent":["const fetchGet = require('./common/fetch'); \r\n\r\nconst modalBox = document.getElementById(\"myModal\"); \r\nconst modalTitle = document.getElementById(\"modalLongTitle\"); \r\nconst modalBody = document.querySelector(\".modal-body\");  \r\nconst closeModals = document.querySelectorAll('[data-dismiss=\"modal\"]');\r\nconst editModalBox = new bootstrap.Modal(modalBox);\r\nconst btnRemove = document.getElementById(\"btnRemove\"); \r\nconst btnCancel = document.getElementById(\"btnCancel\"); \r\nconst btnSave = document.getElementById(\"btnSave\"); \r\nconst btnSaveFormBuilder  = document.getElementById(\"btnSaveFormBuilder\");\r\nconst btnResetFormBuilder  = document.getElementById(\"btnResetFormBuilder\");\r\n//const nodropElements = document.querySelectorAll(\".no-drop\");\r\nconst draggables = [...document.querySelectorAll(\".draggable\")];\r\nconst dropzones = [...document.querySelectorAll(\".dropzone\")];\r\n\r\nvar curMirrorElement;\r\nvar curZone;\r\nvar editor = ace.edit(\"form-json\");\r\nvar formElementJsonConfig = [];\r\n\r\ndocument.addEventListener('DOMContentLoaded', function () {\r\n\tconst mainContainer = document.querySelector('[ref=\"container\"]');  \r\n\tconst mainContainerJson = {};\r\n\tmainContainerJson[\"element-id\"] = mainContainer.id;\r\n\tmainContainerJson[\"element-group\"] = \"default\"\r\n\tmainContainerJson[\"element-version\"] = \"v1\";\r\n\tmainContainerJson[\"element-type\"] = \"container\";\r\n\tmainContainerJson[\"element-parent\"] = \"\";\r\n\tmainContainerJson[\"components\"] = [];\r\n\tformElementJsonConfig.push(mainContainerJson);\r\n\r\n\t//editor.setTheme(\"ace/theme/monokai\");\r\n\teditor.session.setMode(\"ace/mode/json\");\r\n\teditor.session.setUseWrapMode(true);\r\n\teditor.setHighlightActiveLine(false);\r\n\t\r\n\tbtnSaveFormBuilder.addEventListener('click',(e)=>{\r\n\t\te.preventDefault();\r\n\t\tconst jsonForm = editor.getValue();\r\n\t\tconsole.log(typeof jsonForm);\r\n\t\tconsole.log(jsonForm);\r\n\t})\r\n\r\n\tmodalBox.addEventListener('hidden.bs.modal', function (event) {\r\n\t\t// do something...\r\n\t\tconst _component_edit_mode = document.querySelector(\".modal-edit-mode\");\r\n\t\tif (_component_edit_mode){  \r\n\t\t\t_component_edit_mode.classList.remove(\"modal-edit-mode\");\r\n\t\t}\r\n\t})\r\n\r\n  \tcloseModals.forEach((close)=>{\r\n\t\tclose.addEventListener(\"click\",(e)=>{\r\n\t\t\te.preventDefault();\r\n\t\t\tconst _mirror = document.querySelector(\".drag-mirror\");  \r\n\t\t\tif (_mirror){\r\n\t\t\t\tconst buttonRef = e.target.getAttribute(\"ref\");\r\n\t\t\t\tif (_mirror.getAttribute(\"ref\")===\"sidebar-component\"|| buttonRef=='modal-remove')\r\n\t\t\t\t{\r\n\t\t\t\t\t//curZone.removeChild(_mirror);\r\n\t\t\t\t\t_mirror.remove();\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t  \t\tconst _component_edit_mode = document.querySelector(\".modal-edit-mode\");  \r\n\t\t\t//console.log(_component_edit_mode)\r\n\t\t\tif (_component_edit_mode){\r\n\t\t\t\tconst buttonRef = e.target.getAttribute(\"ref\");\r\n\t\t\t\tif (buttonRef=='modal-remove')\r\n\t\t\t\t{\r\n\t\t\t\t//curZone.removeChild(_component_edit_mode);\r\n\t\t\t\t_component_edit_mode.remove();\r\n\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t  \t\teditModalBox.hide();\r\n\t  \r\n\t\t});\r\n  \t});\r\n\r\n\tbtnSave.addEventListener(\"click\", (e)=>{\r\n\t\te.preventDefault();\r\n\t\tlet editComponents = document.querySelectorAll(\".drag-mirror,div.modal-edit-mode\"); \r\n\t\tif (editComponents.length>0)\r\n\t\t{\r\n\t\t\tconst editComponent = editComponents[0];\r\n\t\t\t//if (curEl) curZone.removeChild(curEl);\r\n\t\t\tbtnModalSaveEventHandler(editComponent.dataset.type, editComponent);\r\n\t\t}      \r\n\t})\r\n\r\n\tdraggables.forEach((draggable) => {\r\n\t\tdraggableHandler(draggable);\r\n\t});\r\n\r\n\tdropzones.forEach((zone) => {\r\n\t\tzone.addEventListener(\"dragover\", (e) => {\r\n\t\t\tdropZoneDragoverEventHandler(zone, e);\r\n\t\t});\r\n\r\n\t\tzone.addEventListener(\"dragenter\", (e) => { });\r\n\r\n\t\tzone.addEventListener(\"dragleave\", (e) => {  \r\n\t\t\tdropZoneDragleaveEventHandler(zone, e);\r\n\t\t});\r\n\r\n\t\tzone.addEventListener(\"drop\", (e) => {\r\n\t\t\tconsole.log(\"drop\");\r\n\t\t\t//curZone = zone;\r\n\t\t\telementDropped(zone, e);\r\n\t\t});\r\n  \t});//end dropzones\r\n  \r\n});\r\n\r\n//=========================================================================\r\n//Event Listener Handler\r\n //=========================================================================\r\ndraggableHandler=(draggable)=>\r\n{\r\n  draggable.setAttribute('draggable', true);\r\n\r\n  draggable.addEventListener(\"dragstart\", (e) => {\r\n\tconsole.log(\"dragstart\");\r\n\tconsole.log(e.target);\r\n\tif (e.target.getAttribute(\"ref\")==='sidebar-component')\r\n\t{\r\n\t  draggable.classList.add(\"drag-transit\");        \r\n\t}\r\n\telse{\r\n\t  const dragComponent = e.target.closest(\"div.builder-component\");\r\n\t  dragComponent.classList.add(\"drag-transit\", \"drag-highlight\");    \r\n\t}\r\n  });\r\n\r\n  draggable.addEventListener(\"dragend\", (e) => {\r\n\tconsole.log(\"dragend\");\r\n\t//console.log(e.target);\r\n\tdraggable.classList.remove(\"drag-transit\", \"drag-highlight\");\r\n\telementDropped(e);\r\n\t\r\n  });//dragend\r\n}\r\n\r\ndragComponentEventListeners=(el)=>\r\n{      \r\n  //builderElementDragHandler(document.getElementById(el.id));\r\n\r\n  if (el.getAttribute(\"ref\")==='dragComponent')\r\n  {\r\n\tconst becRemove = el.querySelector('[ref=\"removeComponent\"]');      \r\n\tbecRemove.addEventListener(\"click\", becRemoveEventHandler);\r\n\r\n\tconst becEdit = el.querySelector('[ref=\"editComponent\"]');      \r\n\tbecEdit.addEventListener(\"click\", becEditEventHandler);\r\n\tdraggableHandler(el);\r\n  }\r\n}\r\n\r\nbecRemoveEventHandler=(e)=>{\r\n  const thisEl = e.target.closest('div.builder-component');\r\n  thisEl.remove();\r\n  formElementJsonConfig = removeJsonElement(formElementJsonConfig, \"component-\" + thisEl.id);\r\n  //console.log(formElementJsonConfig);\r\n  refreshEditor();\r\n}\r\n\r\nbecEditEventHandler=(e)=>{\r\n  const thisEl = e.target.closest('div.builder-component');\r\n  const jsonConfig = getFormElementJsonConfig(\"component-\" + thisEl.id);\r\n  thisEl.classList.add(\"modal-edit-mode\");\r\n  thisEl.setAttribute(\"data-type\", jsonConfig[\"element-type\"])\r\n  const el = CreateInstance(jsonConfig[\"element-type\"], JSON.stringify(jsonConfig));\r\n\r\n  modalTitle.innerHTML = `${el.group} - ${el.name} - ${el.version}`;\r\n  modalBody.innerHTML = '';\r\n  modalBody.appendChild(el.renderEditForm());\r\n  el.attachEditFormEvent();\r\n  \r\n  editModalBox.show();     \r\n}\r\n\r\nbtnModalSaveEventHandler=async (domElementType, curDomElement)=>{\r\n  const elementsWithRefInput = modalBox.querySelectorAll('[ref=\"input\"]');\r\n\r\n  // Now you can work with the selected elements\r\n  let config = {};\r\n  for (const element of elementsWithRefInput) {          \r\n\tconst propName = element.dataset.property;\r\n   \r\n\tif (element.type=='checkbox' && !element.checked)\r\n\t{\r\n\t  continue;\r\n\t}\r\n\r\n\tconst propNameBuilder = propName.split('-');\r\n\tif (propNameBuilder.length>1)\r\n\t{\r\n\t  let currentObj = config;\r\n\t  for(let i =0; i<propNameBuilder.length;i++)\r\n\t  {\r\n\t\tconst part = propNameBuilder[i];\r\n\t\tif (!currentObj.hasOwnProperty(part)) {\r\n\t\t  currentObj[part]={};              \r\n\t\t}   \r\n\t\tif (i < propNameBuilder.length - 1) {\r\n\t\t\tcurrentObj = currentObj[part];\r\n\t\t  }         \r\n\t  }\r\n\r\n\t  //currentObj = element.value;\r\n\t  //eval(\"config.\" + propNameBuilder.join(\".\") + \"='\" + element.value + \"'\");\r\n\t  //console.log(`config.${propNameBuilder.join(\".\")} = '${element.value}'`);\r\n\t  eval(`config.${propNameBuilder.join(\".\")} = '${element.value}'`);\r\n\t  \r\n\t  //console.log(config);\r\n\t}\r\n\telse{\r\n\t  //currentObj\r\n\t  config[propNameBuilder[0]] = element.value;\r\n\t}\r\n   \r\n\t//console.log(element.type + \":\" + element.value );\r\n  }\r\n\r\n  //console.log(config)\r\n  config.formBuilderMode = true;\r\n\t\t\r\n  const el =  CreateInstance(domElementType, JSON.stringify(config)); \r\n\r\n  config=el.config;\r\n  //Execute element custom button save event before render\r\n  await el.executeButtonSave();\r\n\r\n  const zone = curDomElement.closest('[ref=\"container\"]');\r\n  //console.log(zone)\r\n  zone.insertBefore(el.renderDomElement(), curDomElement);      \r\n  zone.removeChild(curDomElement);\r\n \r\n  //el.attachComponentEventListener();\r\n\t//assign event to buildereditcomponents\r\n\t//Prepare for Json\r\n  config[\"element-id\"] = \"component-\" + el.elementId;\r\n  config[\"element-group\"] = el.group;\r\n  config[\"element-version\"] = el.version;\r\n  config[\"element-type\"] = el.config.type;\r\n\r\n  const newDomEl = document.getElementById(el.elementId)\r\n  config[\"element-parent\"] = newDomEl.closest('[ref=\"container\"]').id;\r\n  formElementJsonConfig.push(config);\r\n\r\n  //console.log(formElementJsonConfig)\r\n  dragComponentEventListeners(newDomEl);\r\n\r\n  refreshEditor();\r\n\r\n  editModalBox.hide();\r\n}\r\n\r\ndropZoneDragoverEventHandler=(zone, e)=>{\r\n  //console.log(zone)\r\n  e.preventDefault();\r\n  let _mirror = document.querySelector(\".drag-mirror\");  \r\n  // console.log(\"dragover\")\r\n  // console.log(_mirror)\r\n  if (!_mirror){     \r\n\r\n\t//e,target is drop container\r\n\tconst targetEl  = document.querySelector(\".drag-transit\");\r\n\t\r\n\t_mirror = targetEl.cloneNode(true);\r\n\t_mirror.classList.add(\"drag-mirror\");\r\n\t_mirror.classList.remove(\"drag-transit\");\r\n\t// zone.appendChild(draggable);\r\n\tconst y = event.clientY;\r\n\tconst x = event.clientX;\r\n\tconst item = getReference(zone, _mirror, x,y);\r\n\t\r\n\tcurMirrorElement = item;\r\n\tzone.insertBefore(_mirror, item);\r\n\tcurZone=zone;\r\n\t//if (targetEl.getAttribute(\"ref\") ==='dragComponent') {targetEl.remove();}\r\n  }\r\n}\r\n\r\ndropZoneDragleaveEventHandler=(zone, e)=>{\r\n  e.preventDefault();\r\n  console.log(\"dragleave\");\r\n  const _mirror = document.querySelector(\".drag-mirror\");  \r\n  if (_mirror){   \r\n\tconst y = event.clientY;\r\n\tconst x = event.clientX;\r\n\tconst item = getReference(zone, _mirror, x,y);\r\n\tif (item!=curMirrorElement && item!=_mirror)\r\n\t{\r\n\t  curMirrorElement = \"\";          \r\n\t  _mirror.remove();\r\n\t  //zone.removeChild(_mirror);\r\n\t}\r\n  }\r\n}\r\nelementDropped=(zone, e)=>{\r\n  const _mirror = document.querySelector(\".drag-mirror\");\r\n  \r\n  hide(document.querySelector(\".drag-and-drop-alert\"));\r\n  if (_mirror){     \r\n  \r\n\tconst componentType = _mirror.getAttribute(\"ref\");        \r\n\tif (componentType==='sidebar-component'){          \r\n\t  \r\n\t  const el = CreateInstance(_mirror.dataset.type, '{\"formBuilderMode\":true}');\r\n\t  el.Test();\r\n\t  modalTitle.innerHTML = `${el.group} - ${el.name} - ${el.version}`;\r\n\t  modalBody.innerHTML = '';\r\n\t  modalBody.appendChild(el.renderEditForm());\r\n\t  el.attachEditFormEvent();\r\n\t  editModalBox.show();     \r\n\t}\r\n\telse{\r\n\t  const element = document.querySelector(`#${_mirror.id}:not(.drag-mirror)`);\r\n\t  //console.log(element)\r\n\t  const dropZone = _mirror.closest('[ref=\"container\"]');\r\n\t  dropZone.insertBefore(element, _mirror);\r\n\t  _mirror.remove();\r\n\t  // //console.log(element)\r\n\t  // _mirror.classList.remove(\"drag-mirror\");\r\n\t  // element.remove();\r\n\t  // dragComponentEventListeners(_mirror)\r\n\t}\r\n\trefreshEditor();\r\n  }\r\n}\r\n//=========================================================================\r\n//End Event Listener Handler\r\n //=========================================================================\r\n\r\n\r\nfunction getReference (dropTarget, target, x, y) {\r\n  const horizontal = false;\r\n  var reference = outside();\r\n  //console.log(reference)\r\n  return reference;\r\n\r\n  function outside () { // slower, but able to figure out any position\r\n\tvar len = dropTarget.children.length;\r\n\tvar i;\r\n\tvar el;\r\n\tvar rect;\r\n\tfor (i = 0; i < len; i++) {\r\n\t  el = dropTarget.children[i];\r\n\t  rect = el.getBoundingClientRect();\r\n\t  //if (horizontal && (rect.left + rect.width / 2) > x) { return el; }\r\n\t  if ((rect.left + rect.width / 3) > x && (rect.top + rect.height / 3) > y) { return el; }\r\n\t}\r\n\treturn null;\r\n  }\r\n}\r\n\r\nfunction CreateInstance(classNameString, json)\r\n{\r\n  var obj = new (eval(classNameString))(json);\r\n  return obj\r\n}\r\n\r\nfunction removeJsonElement(jsonComponent, elementId) {\r\n  //console.log(elementId)\r\n  if (Array.isArray(jsonComponent)) {\r\n\tfor (let i = 0; i < jsonComponent.length; i++) {\r\n\t  const com = jsonComponent[i];\r\n\t  if (com[\"element-type\"] === 'Column') {\r\n\t\tcom[\"columns\"].forEach((e) => {\r\n\t\t  e[\"components\"] = removeJsonElement(e[\"components\"], elementId);\r\n\t\t});\r\n\t  } else {\r\n\t\tif (com[\"element-id\"] === elementId) {\r\n\t\t  jsonComponent.splice(i, 1);\r\n\t\t  // console.log(\"removeJsonElement- remove\")\r\n\t\t  // console.log(jsonComponent)\r\n\t\t  i--; // Decrement i to account for the removed element\r\n\t\t}\r\n\t  }\r\n\t}\r\n  }\r\n  // console.log(\"removeJsonElement- final\")\r\n  // console.log(jsonComponent)\r\n  return jsonComponent;\r\n}\r\n\r\nfunction getFormElementJsonConfig(elementId) {\r\n  const jsonObj = formElementJsonConfig;\r\n  if (Array.isArray(jsonObj)) {\r\n\tfor (let i = 0; i < jsonObj.length; i++) {\r\n\t  if (jsonObj[i][\"element-id\"]===elementId)\r\n\t  {\r\n\t\treturn jsonObj[i];\r\n\t  }\r\n\t}\r\n\treturn null;\r\n  }     \r\n  return null;\r\n}\r\n\r\nfunction refreshEditor()\r\n{ \r\n  //Get first element - Main Container\r\n  const mainContainer = document.getElementById(formElementJsonConfig[0][\"element-id\"]);\r\n  const formElementJsonRep = formElementJsonConfig[0];\r\n  formElementJsonRep.components = getAllChildElementsRecursive(mainContainer);\r\n  editor.setValue(JSON.stringify(formElementJsonRep, null, '\\t'));\r\n\r\n  //console.log(formElementJsonConfig)\r\n}\r\n\r\nfunction getAllChildElementsRecursive(parentElement, result = []) {\r\n  var children = parentElement.children;\r\n  //var children = parentElement.querySelectorAll(\".builder-component,.drag-container\");\r\n  for (let i = 0; i < children.length; i++) {\r\n\t\r\n\tconst domComponent = children[i].querySelector('[ref=\"component\"]');\r\n\tif (domComponent){    \r\n\t  //console.log(domComponent.id)   \r\n\t  const jsonComponent = getFormElementJsonConfig(domComponent.id);\r\n\t   \r\n\t  if (jsonComponent[\"element-type\"]===\"Column\")\r\n\t  {\r\n\t\tresult.push(jsonComponent);\r\n\t\tconst elementId = domComponent.id.split(\"-\")[1];\r\n\t\tconst query = `[ref=\"col\"][data-parent=\"Column-${elementId}\"]`;\r\n\t\t//console.log(t)\r\n\t\tconst cols = domComponent.querySelectorAll(query); \r\n\t\t   \r\n\t\tlet colNumber = 0;\r\n\t\t \r\n\t\tcols.forEach((col)=>{                \r\n\t\t  jsonComponent[\"columns\"][colNumber][\"components\"]=[];\r\n\t\t  getAllChildElementsRecursive(col, jsonComponent[\"columns\"][colNumber][\"components\"]);              \r\n\t\t  colNumber++;\r\n\t\t})            \r\n\t  }\r\n\t  else\r\n\t  {\r\n\t\tresult.push(jsonComponent);\r\n\t  }\r\n\t}        \r\n\t\r\n  }\r\n  \r\n  return result;\r\n}\r\n\r\nvar show = function (elem) {\r\n  elem.style.display = 'block';\r\n};\r\n\r\n// Hide an element\r\nvar hide = function (elem) {\r\n  elem.style.display = 'none';\r\n};\r\nisNullOrEmpty=function (value) {\r\n  return value === null || value === undefined || (typeof value === 'string' && value.trim() === '') || (Array.isArray(value) && value.length === 0);\r\n};","const fetchOptions = {\r\n\tmethod: 'GET', // HTTP method (GET, POST, etc.)\r\n\theaders: {\r\n\t  'Content-Type': 'application/json', // Request headers\r\n\t  // Add any other headers you need\r\n\t},\r\n\t// You can add more options like 'body' for POST requests, 'mode', 'credentials', etc.\r\n  };\r\n\r\nconst fetchGet = (apiUrl, fetchOptions)=>{\r\n  \treturn fetch(apiUrl, fetchOptions)\r\n\t.then((response) => {\r\n\t\t// Check if the response status is OK (200)\r\n\t\tif (!response.ok) {\r\n\t\t\tconsole.log(response.status);\r\n\t\t\tthrow new Error(`HTTP error! Status: ${response.status}`);\r\n\t\t}\r\n\t\t// Parse the response JSON\t\t\r\n\t\treturn response.json();\r\n\t})\r\n\t.catch((error) => {\r\n\t\tconsole.error('Fetch error:', error);\r\n\t\tthrow error; // Rethrow the error to propagate it to the caller\r\n\t});\r\n\r\n};\r\nmodule.exports = fetchGet;\r\n  // Use the Fetch API to make a request with the specified options\r\n"],"names":[],"version":3,"file":"main.js.map"}